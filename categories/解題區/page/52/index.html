<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Category: 解題區 | Morris&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ACMer NEET NCU UVa OJ">
<meta property="og:type" content="website">
<meta property="og:title" content="Morris' Blog">
<meta property="og:url" content="http://morris821028.github.io/categories/解題區/page/52/">
<meta property="og:site_name" content="Morris' Blog">
<meta property="og:description" content="ACMer NEET NCU UVa OJ">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morris' Blog">
<meta name="twitter:description" content="ACMer NEET NCU UVa OJ">
<link rel="publisher" href="108158678174364350000">

  
    <link rel="alternative" href="/atom.xml" title="Morris&#39; Blog" type="application/atom+xml">
  
  
    <meta name="google-site-verification" content="5mRgj8NanEMpGZuNfHNJNmH90RgNlrnJXsFlTaKD6Gs" />
  
  
    <link rel="shortcut icon" href="/img/f.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <script src="/js/jquery-2.1.0.min.js"></script>
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  
  <!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.5.1.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://cdn.oesmith.co.uk/morris-0.5.1.min.js"></script>
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"><div id="banner-right"></div></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Morris&#39; Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Can you find me ?</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          
            <a class="main-nav-link" href="/"><i class=icon-home title='Home'></i></a>
          
        
          
            <a class="main-nav-link" href="/about"><i class=icon-user title='About'></i></a>
          
        
          
            <a class="main-nav-link" href="/archives"><i class=icon-archive title='Archives'></i></a>
          
        
          
            <a class="main-nav-link" href="/tags"><i class=icon-tags title='Tags'></i></a>
          
        
          
            <a class="main-nav-link" href="/picture"><i class=icon-camera title='Pictures'></i></a>
          
        
          
            <a class="main-nav-link" href="/works"><i class=icon-trophy title='Works'></i></a>
          
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://morris821028.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        
          <section id="main">
  
    <article id="post-oj/uva/uva-10709" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/08/oj/uva/uva-10709/" class="article-date">
  <time datetime="2014-06-08T08:54:39.000Z" itemprop="datePublished">Jun 8 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/08/oj/uva/uva-10709/">UVa 10709 - Intersection is Not that Easy</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/06/08/oj/uva/uva-10709/" data-id="wnkd5y5bjw3os6mm" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/06/08/oj/uva/uva-10709/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/幾何/">幾何</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/線段交/">線段交</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p>In this problem your job is to find the distance between two lines or a line and a line segment or two line segments. Suppose we have two points A(x1,y1) and B(x2,y2) on a two dimensional Cartesian plane. If we connect A and B then we get line segment AB. But if we connect AB and extend it on both side at infinite length then we get line AB.</p>
<h2 id="Input">Input</h2>
<p>The input file contains several sets of inputs. The description of each set of input is given below:</p>
<p>The description for each set of input is given in two lines. Each line contains four integers and a string. First line contains x1, y1, x2, y2 and S1 and the second line contains x3, y3, x4, y4 and S2. The value of S1 and S2 can be either “L” or “LS” which stands for “Line” and “Line-segment” respectively. (x1, y1) and (x2, y2) are the endpoints of first line segment or they are just two different points on the first line depending on the value of S1. The same story applies for the second input line for this set. Input is terminated by a set where the value of S1 and S1 is “END”. This set should not be processed. Point (x1,y1) and (x2,y2) are always different. Similarly point (x3,y3) and (x4,y4) are also always different. All the integers in the input file have absolute value less than 101.</p>
<h2 id="Output">Output</h2>
<p>For each set of input you should produce one line of output which contains a single floating-point number indicating the distance between the two lines or line segments or the distance between one line and one line segment. This floating-point number contains five digits after the decimal point. Errors less than 2e-5 will be ignored.</p>
<h2 id="Sample_Input">Sample Input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">10</span> <span class="number">10</span> <span class="number">20</span> <span class="number">20</span> L</div><div class="line">-<span class="number">10</span> –<span class="number">10</span> <span class="number">19</span> <span class="number">19</span> L</div><div class="line"><span class="number">10</span> <span class="number">10</span> <span class="number">12</span> <span class="number">13</span> LS</div><div class="line"><span class="number">11</span> <span class="number">11</span> <span class="number">19</span> <span class="number">20</span> LS</div><div class="line"><span class="number">10</span> <span class="number">10</span> <span class="number">12</span> <span class="number">12</span> <span class="keyword">END</span></div><div class="line"><span class="number">11</span> <span class="number">11</span> <span class="number">23</span> <span class="number">34</span> <span class="keyword">END</span></div></pre></td></tr></table></figure>

<h2 id="Output_for_Sample_Input">Output for Sample Input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">0.00000</div><div class="line">0.27735</div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<p><strong> 題目描述： </strong></p>
<p>詢問 線段/線 和 線段/線 之間的最短距離為何。</p>
<p><strong> 題目解法： </strong></p>
<p>據說這一題精準度卡很緊，上一次是在兩年前寫這一題，那是使用投影判斷，果真死在精度？</p>
<p>總之，為了避開投影精準度問題，使用外積和內積來判斷我們所有需要的條件。</p>
<ul>
<li>兩線斷是否相交</li>
<li>一個點是否在線段兩端點之間 (線段上方/下方)</li>
<li>是否在線段上</li>
</ul>
<p>以上三點接能只靠加減乘來完成，由於輸入值都是整數，不會有精度上的問題。</p>
<p>接著，個別討論所有配對情況要如何判斷。</p>
<ul>
<li>線段與線段<ul>
<li>相交，最鄰近距離 0。</li>
<li>不相交，查閱是否能作投影，否則直接查閱到端點的距離。</li>
</ul>
</li>
<li>線與線<ul>
<li>不平行，最鄰近距離 0。</li>
<li>平行，直接調用公式計算兩線距離。 // 當然可以調用投影距離。</li>
</ul>
</li>
<li>線與線段<ul>
<li>線段跨過線的兩側，最鄰近距離 0</li>
<li>同側，直接做投影。</li>
</ul>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt; </span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;math.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;algorithm&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> eps 1e-6</span></div><div class="line"><span class="keyword">struct</span> Pt {</div><div class="line">    <span class="keyword">int</span> x, y;</div><div class="line">    Pt(<span class="keyword">int</span> a = <span class="number">0</span>, <span class="keyword">int</span> b = <span class="number">0</span>):</div><div class="line">    	x(a), y(b) {}</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> {</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(x-a.x) &gt; eps)</div><div class="line">            <span class="keyword">return</span> x &lt; a.x;</div><div class="line">        <span class="keyword">return</span> y &lt; a.y;</div><div class="line">    }</div><div class="line">	Pt <span class="keyword">operator</span>-(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> {</div><div class="line">		Pt ret;</div><div class="line">		ret.x = x - a.x;</div><div class="line">		ret.y = y - a.y;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    }</div><div class="line">};</div><div class="line"><span class="keyword">enum</span> LINE_TYPE {LINE, SEGMENT};</div><div class="line"><span class="keyword">struct</span> LINE2D {</div><div class="line">    Pt s, e;</div><div class="line">    LINE_TYPE type;</div><div class="line">};</div><div class="line"><span class="keyword">double</span> dist(Pt a, Pt b) {</div><div class="line">	<span class="keyword">return</span> hypot(a.x - b.x, a.y - b.y);</div><div class="line">}</div><div class="line"><span class="keyword">double</span> dot(Pt a, Pt b) {</div><div class="line">	<span class="keyword">return</span> a.x * b.x + a.y * b.y;</div><div class="line">}</div><div class="line"><span class="keyword">double</span> cross2(Pt a, Pt b) {</div><div class="line">	<span class="keyword">return</span> a.x * b.y - a.y * b.x;</div><div class="line">}</div><div class="line"><span class="keyword">double</span> cross(Pt o, Pt a, Pt b) {</div><div class="line">    <span class="keyword">return</span> (a.x-o.x)*(b.y-o.y)-(a.y-o.y)*(b.x-o.x);</div><div class="line">}</div><div class="line"><span class="keyword">int</span> between(Pt a, Pt b, Pt c) {</div><div class="line">	<span class="keyword">return</span> dot(c - a, b - a) &gt;= <span class="number">0</span> &amp;&amp; dot(c - b, a - b) &gt;= <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> onSeg(Pt a, Pt b, Pt c) {</div><div class="line">	<span class="keyword">return</span> between(a, b, c) &amp;&amp; <span class="built_in">fabs</span>(cross(a, b, c)) &lt; eps;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> intersection(Pt as, Pt at, Pt bs, Pt bt) {</div><div class="line">    <span class="keyword">if</span>(cross(as, at, bs) * cross(as, at, bt) &lt; <span class="number">0</span> &amp;&amp;</div><div class="line">       cross(at, as, bs) * cross(at, as, bt) &lt; <span class="number">0</span> &amp;&amp;</div><div class="line">       cross(bs, bt, as) * cross(bs, bt, at) &lt; <span class="number">0</span> &amp;&amp;</div><div class="line">       cross(bt, bs, as) * cross(bt, bs, at) &lt; <span class="number">0</span>)</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="keyword">double</span> distProjection(Pt as, Pt at, Pt s) {</div><div class="line">	<span class="keyword">int</span> a, b, c;</div><div class="line">	a = at.y - as.y;</div><div class="line">	b = as.x - at.x;</div><div class="line">	c = - (a * as.x + b * as.y);</div><div class="line">	<span class="keyword">return</span> <span class="built_in">fabs</span>(a * s.x + b * s.y + c) / hypot(a, b);</div><div class="line">}</div><div class="line"><span class="keyword">double</span> closest(LINE2D l1, LINE2D l2) {</div><div class="line">	<span class="keyword">if</span>(l1.type == SEGMENT &amp;&amp; l2.type == SEGMENT) {</div><div class="line">		<span class="keyword">if</span>(intersection(l1.s, l1.e, l2.s, l2.e))</div><div class="line">			<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">		<span class="keyword">double</span> c = <span class="number">1e+30</span>;</div><div class="line">		<span class="keyword">if</span>(between(l1.s, l1.e, l2.s))</div><div class="line">			c = min(c, distProjection(l1.s, l1.e, l2.s));</div><div class="line">		<span class="keyword">else</span></div><div class="line">			c = min(c, min(dist(l1.s, l2.s), dist(l1.e, l2.s)));</div><div class="line">			</div><div class="line">		<span class="keyword">if</span>(between(l1.s, l1.e, l2.e))</div><div class="line">			c = min(c, distProjection(l1.s, l1.e, l2.e));</div><div class="line">		<span class="keyword">else</span></div><div class="line">			c = min(c, min(dist(l1.s, l2.e), dist(l1.e, l2.e)));</div><div class="line">		<span class="comment">/* opposite */</span></div><div class="line">		<span class="keyword">if</span>(between(l2.s, l2.e, l1.s))</div><div class="line">			c = min(c, distProjection(l2.s, l2.e, l1.s));</div><div class="line">		<span class="keyword">else</span></div><div class="line">			c = min(c, min(dist(l1.s, l2.s), dist(l1.e, l2.s)));</div><div class="line">			</div><div class="line">		<span class="keyword">if</span>(between(l2.s, l2.e, l1.e))</div><div class="line">			c = min(c, distProjection(l2.s, l2.e, l1.e));</div><div class="line">		<span class="keyword">else</span></div><div class="line">			c = min(c, min(dist(l2.s, l1.e), dist(l2.e, l1.e)));</div><div class="line">		<span class="keyword">return</span> c;</div><div class="line">	}</div><div class="line">	<span class="keyword">if</span>(l1.type == LINE &amp;&amp; l2.type == LINE) {</div><div class="line">		<span class="keyword">int</span> a1, a2, b1, b2, c1, c2;</div><div class="line">		a1 = l1.s.y - l1.e.y;</div><div class="line">		b1 = l1.e.x - l1.s.x;</div><div class="line">		c1 = - (a1 * l1.s.x + b1 * l1.s.y);</div><div class="line">		a2 = l2.s.y - l2.e.y;</div><div class="line">		b2 = l2.e.x - l2.s.x;</div><div class="line">		c2 = - (a2 * l2.s.x + b2 * l2.s.y);</div><div class="line">		<span class="keyword">if</span>(a1 * b2 - a2 * b1 != <span class="number">0</span>)</div><div class="line">			<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">		<span class="keyword">return</span> distProjection(l1.s, l1.e, l2.s);</div><div class="line">	}</div><div class="line">	<span class="keyword">if</span>(l1.type != l2.type) {</div><div class="line">		<span class="keyword">if</span>(l1.type == SEGMENT)</div><div class="line">			swap(l1, l2);</div><div class="line">		<span class="comment">/* l1 LINE, l2 SEGMENT*/</span></div><div class="line">		<span class="keyword">int</span> a1, b1, c1;</div><div class="line">		a1 = l1.s.y - l1.e.y;</div><div class="line">		b1 = l1.e.x - l1.s.x;</div><div class="line">		c1 = - (a1 * l1.s.x + b1 * l1.s.y);</div><div class="line">		<span class="keyword">int</span> v1, v2;</div><div class="line">		v1 = a1 * l2.s.x + b1 * l2.s.y + c1;</div><div class="line">		v2 = a1 * l2.e.x + b1 * l2.e.y + c1;</div><div class="line">		<span class="keyword">if</span>(v1 * v2 &lt;= <span class="number">0</span>)</div><div class="line">			<span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// different side</span></div><div class="line">		<span class="keyword">return</span> min(distProjection(l1.s, l1.e, l2.s), distProjection(l1.s, l1.e, l2.e));</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line">	<span class="comment">// freopen("in.txt", "r+t", stdin);</span></div><div class="line">	<span class="comment">// freopen("out.txt", "w+t", stdout); </span></div><div class="line">	<span class="keyword">int</span> x1, x2, y1, y2;</div><div class="line">	LINE2D l1, l2;</div><div class="line">	<span class="keyword">char</span> s[<span class="number">1024</span>];</div><div class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d %d %d %s"</span>, &amp;x1, &amp;y1, &amp;x2, &amp;y2, s) == <span class="number">5</span> &amp;&amp; s[<span class="number">0</span>] != <span class="string">'E'</span>) {</div><div class="line">		l1.s = Pt(x1, y1), l1.e = Pt(x2, y2);</div><div class="line">		<span class="keyword">if</span>(!<span class="built_in">strcmp</span>(<span class="string">"L"</span>, s))</div><div class="line">			l1.type = LINE;</div><div class="line">		<span class="keyword">else</span></div><div class="line">			l1.type = SEGMENT;</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%d %d %d %d %s"</span>, &amp;x1, &amp;y1, &amp;x2, &amp;y2, s);</div><div class="line">		l2.s = Pt(x1, y1), l2.e = Pt(x2, y2);</div><div class="line">		<span class="keyword">if</span>(!<span class="built_in">strcmp</span>(<span class="string">"L"</span>, s))</div><div class="line">			l2.type = LINE;</div><div class="line">		<span class="keyword">else</span></div><div class="line">			l2.type = SEGMENT;</div><div class="line">		<span class="keyword">double</span> ret = closest(l1, l2);</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%.5lf\n"</span>, ret);</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="comment">/*</span></div><div class="line">10 10 20 20 L</div><div class="line">-10 -10 19 19 L</div><div class="line"></div><div class="line">10 10 12 13 LS</div><div class="line">11 11 19 20 LS</div><div class="line"></div><div class="line">1 1 2 2 LS</div><div class="line">3 3 4 4 LS</div><div class="line"></div><div class="line">1 1 2 2 LS</div><div class="line">3 3 4 4 L</div><div class="line"></div><div class="line">10 10 12 12 END</div><div class="line">11 11 23 34 END</div><div class="line">*/</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/UVa-11585" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/04/oj/uva/UVa-11585/" class="article-date">
  <time datetime="2014-06-04T00:28:01.000Z" itemprop="datePublished">Jun 4 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/04/oj/uva/UVa-11585/">UVa 11585 - Nurikabe</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/06/04/oj/uva/UVa-11585/" data-id="ljfqf2pztaqlkve4" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/06/04/oj/uva/UVa-11585/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bfs/">bfs</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p>At least it’s not a sudoku problem</p>
<p>The puzzle Nurikabe is played on a grid. Initially, each grid space is either blank or contains a single number. The goal is to shade in some of the blank spaces to satisfy the following constraints:</p>
<ul>
<li>Any two shaded spaces are connected by some sequence of adjacent shaded spaces. Two spaces are called adjacent if they share a side.</li>
<li>For each of the unshaded spaces b, let Wb be the collection of all unshaded spaces that can be reached from b by a sequence of adjacent unshaded spaces. Then, Wb contains exactly one numbered space and that number is exactly the number of spaces in Wb.</li>
<li>For any unshaded space b, there is a sequence of unshaded spaces starting at b and ending at a space on the edge of the grid where consecutive spaces in this sequence share a side or a corner.</li>
<li>Finally, in every 2 x 2 subsquare there is at least one unshaded space. </li>
</ul>
<p>The image shows an example of a Nurikabe puzzle and its solution. Take care to verify all four constraints are satisfied in the solution. To help you understand the third constraint, note that the middle cell containing the number 1 can reach the edge of the grid since it shares a corner with a group of unshaded spaces containing the number 2.</p>
<p><img class="lazy" data-original="/img/p11585b.png" alt="Example Nurikabe"></p>
<p>It is known that the problem of determining if a Nurikabe grid can be shaded to satisfy the constraints is NP-complete. Your task is much easier. Given an initial grid and a proposed shading, determine if the shading satisfies the constraints of the Nurikabe puzzle.</p>
<p>Input begins with a single integer t that indicates the number of grids to verify. The first line of each case contains three integers r,c,d where the grid has r rows and c columns (1 ≤ r,c ≤ 100). Then, d lines follow, each containing three integers r’,c’,n meaning the grid cell at location (r’,c’) contains the positive number n. The upper-left grid space has coordinates (0,0), no space receives more than one number, and no two numbered grid spaces will share an edge. Finally, the shading data is specified by r strings of c characters each (one string per line). The j’th character in the i’th row of the shading data is ‘#’ if the cell with coordinates (i,j) is shaded and ‘.’ if that cell is not shaded. Each test case is preceded by a blank line.</p>
<p>For each input case, output a line containing either solved or not solved to indicate whether or not the shading represents a solution to the puzzle.</p>
<h2 id="Sample_input">Sample input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="number">5</span></div><div class="line"></div><div class="line"><span class="number">5</span> <span class="number">5</span> <span class="number">6</span></div><div class="line"><span class="number">0</span> <span class="number">0</span> <span class="number">3</span></div><div class="line"><span class="number">0</span> <span class="number">2</span> <span class="number">1</span></div><div class="line"><span class="number">0</span> <span class="number">4</span> <span class="number">2</span></div><div class="line"><span class="number">2</span> <span class="number">2</span> <span class="number">1</span></div><div class="line"><span class="number">3</span> <span class="number">4</span> <span class="number">2</span></div><div class="line"><span class="number">4</span> <span class="number">0</span> <span class="number">2</span></div><div class="line">.<span class="comment">#.#.</span></div><div class="line">.<span class="comment">###.</span></div><div class="line">.<span class="comment">#.##</span></div><div class="line"><span class="comment">###..</span></div><div class="line">..<span class="comment">###</span></div><div class="line"></div><div class="line"><span class="number">5</span> <span class="number">5</span> <span class="number">6</span></div><div class="line"><span class="number">0</span> <span class="number">0</span> <span class="number">3</span></div><div class="line"><span class="number">0</span> <span class="number">2</span> <span class="number">1</span></div><div class="line"><span class="number">0</span> <span class="number">4</span> <span class="number">2</span></div><div class="line"><span class="number">2</span> <span class="number">2</span> <span class="number">1</span></div><div class="line"><span class="number">3</span> <span class="number">4</span> <span class="number">3</span></div><div class="line"><span class="number">4</span> <span class="number">0</span> <span class="number">2</span></div><div class="line">.<span class="comment">#.#.</span></div><div class="line">.<span class="comment">###.</span></div><div class="line">.<span class="comment">#.##</span></div><div class="line"><span class="comment">####.</span></div><div class="line">..<span class="comment">#..</span></div><div class="line"></div><div class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">1</span></div><div class="line"><span class="number">0</span> <span class="number">0</span> <span class="number">2</span></div><div class="line">.<span class="comment">##</span></div><div class="line">.<span class="comment">##</span></div><div class="line"></div><div class="line"><span class="number">2</span> <span class="number">2</span> <span class="number">1</span></div><div class="line"><span class="number">0</span> <span class="number">0</span> <span class="number">1</span></div><div class="line">..</div><div class="line"><span class="comment">##</span></div><div class="line"></div><div class="line"><span class="number">2</span> <span class="number">2</span> <span class="number">2</span></div><div class="line"><span class="number">0</span> <span class="number">0</span> <span class="number">1</span></div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">1</span></div><div class="line">.<span class="comment">#</span></div><div class="line"><span class="comment">#.</span></div></pre></td></tr></table></figure>

<h2 id="Sample_output">Sample output</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">solved</div><div class="line"><span class="keyword">not</span> solved</div><div class="line"><span class="keyword">not</span> solved</div><div class="line"><span class="keyword">not</span> solved</div><div class="line"><span class="keyword">not</span> solved</div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<p><strong> 題目描述： </strong></p>
<ul>
<li>所有陰影區域會相連 (上下左右)</li>
<li>每一個區域的數字，會恰好等於該區域的非陰影個數。</li>
<li>所有非陰影的區域，皆可以連到遊戲盤面的四邊 (九宮格連接)</li>
<li>任意 2x2 區域，至少有一個非陰影的區域。</li>
</ul>
<p><strong> 題目解法： </strong></p>
<p>能剪枝就剪枝，不然很容易 TLE。討論版面上說 DFS 比 BFS 快一些。但這裡還是用 BFS 完成。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;queue&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> g[<span class="number">205</span>][<span class="number">205</span>], ug[<span class="number">205</span>][<span class="number">205</span>];</div><div class="line"><span class="keyword">char</span> pattern[<span class="number">205</span>][<span class="number">205</span>];</div><div class="line"><span class="keyword">int</span> cond1(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> cellcnt) {</div><div class="line"><span class="comment">/* </span></div><div class="line"> Any two shaded spaces are connected by some sequence </div><div class="line"> of adjacent shaded spaces. Two spaces are called </div><div class="line"> adjacent if they share a side. </div><div class="line">*/</div><div class="line">    <span class="keyword">int</span> dx[] = {<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,-<span class="number">1</span>};</div><div class="line">    <span class="keyword">int</span> dy[] = {<span class="number">1</span>,-<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>};</div><div class="line">    <span class="stl_container"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;</span> X, Y;</div><div class="line">    <span class="keyword">int</span> i, tx, ty;</div><div class="line">    <span class="keyword">char</span> used[<span class="number">205</span>][<span class="number">205</span>] = {};</div><div class="line">    X.push(x), Y.push(y);</div><div class="line">    used[x][y] = <span class="number">1</span>;</div><div class="line">    cellcnt--;</div><div class="line">    <span class="keyword">while</span>(!X.empty()) {</div><div class="line">        x = X.front(), X.pop();</div><div class="line">        y = Y.front(), Y.pop();</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) {</div><div class="line">            tx = x+dx[i], ty = y+dy[i];</div><div class="line">            <span class="keyword">if</span>(tx &lt; <span class="number">0</span> || ty &lt; <span class="number">0</span> || tx &gt;= r || ty &gt;= c)</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">if</span>(used[tx][ty] == <span class="number">0</span> &amp;&amp; pattern[tx][ty] == <span class="string">'#'</span>) {</div><div class="line">                used[tx][ty] = <span class="number">1</span>;</div><div class="line">                cellcnt--;</div><div class="line">                <span class="keyword">if</span>(cellcnt &lt; <span class="number">0</span>)	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">                X.push(tx), Y.push(ty);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> cellcnt == <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> cond2(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> r, <span class="keyword">int</span> c) {</div><div class="line"><span class="comment">/*</span></div><div class="line"> For each of the unshaded spaces b, let Wb be the </div><div class="line"> collection of all unshaded spaces that can be </div><div class="line"> reached from b by a sequence of adjacent unshaded </div><div class="line"> spaces. Then, Wb contains exactly one numbered </div><div class="line"> space and that number is exactly the number of </div><div class="line"> spaces in Wb. </div><div class="line">*/</div><div class="line">    <span class="keyword">int</span> dx[] = {<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,-<span class="number">1</span>};</div><div class="line">    <span class="keyword">int</span> dy[] = {<span class="number">1</span>,-<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>};</div><div class="line">    <span class="stl_container"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;</span> X, Y;</div><div class="line">    <span class="keyword">int</span> Wb = g[x][y], i, tx, ty;</div><div class="line">    <span class="keyword">char</span> used[<span class="number">205</span>][<span class="number">205</span>] = {};</div><div class="line">    <span class="keyword">if</span>(pattern[x][y] == <span class="string">'.'</span>) {</div><div class="line">        X.push(x), Y.push(y);</div><div class="line">        used[x][y] = <span class="number">1</span>;</div><div class="line">    } <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    Wb--;</div><div class="line">    <span class="keyword">while</span>(!X.empty()) {</div><div class="line">        x = X.front(), X.pop();</div><div class="line">        y = Y.front(), Y.pop();</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) {</div><div class="line">            tx = x+dx[i], ty = y+dy[i];</div><div class="line">            <span class="keyword">if</span>(tx &lt; <span class="number">0</span> || ty &lt; <span class="number">0</span> || tx &gt;= r || ty &gt;= c)</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">if</span>(used[tx][ty] == <span class="number">0</span> &amp;&amp; pattern[tx][ty] == <span class="string">'.'</span>) {</div><div class="line">                <span class="comment">// if(ug[tx][ty]) return 0; // other Wb</span></div><div class="line">                used[tx][ty] = <span class="number">1</span>;</div><div class="line">                Wb--;</div><div class="line">                <span class="keyword">if</span>(Wb &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">                X.push(tx), Y.push(ty);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> Wb == <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> cond3(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> r, <span class="keyword">int</span> c) {</div><div class="line"><span class="comment">/*</span></div><div class="line">  For any unshaded space b, there is a sequence </div><div class="line">  of unshaded spaces starting at b and ending </div><div class="line">  at a space on the edge of the grid where </div><div class="line">  consecutive spaces in this sequence share a </div><div class="line">  side or a corner. </div><div class="line">*/</div><div class="line">    <span class="keyword">int</span> dx[] = {<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>};</div><div class="line">    <span class="keyword">int</span> dy[] = {<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>};</div><div class="line">    <span class="stl_container"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;</span> X, Y;</div><div class="line">    <span class="keyword">int</span> i, tx, ty;</div><div class="line">    <span class="keyword">char</span> used[<span class="number">205</span>][<span class="number">205</span>] = {};</div><div class="line">    <span class="keyword">if</span>(pattern[x][y] != <span class="string">'.'</span>)</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    X.push(x), Y.push(y);</div><div class="line">    used[x][y] = <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span>(!X.empty()) {</div><div class="line">        x = X.front(), X.pop();</div><div class="line">        y = Y.front(), Y.pop();</div><div class="line">        <span class="keyword">if</span>(x == <span class="number">0</span> || x == r-<span class="number">1</span> || y == <span class="number">0</span> || y == c-<span class="number">1</span>)</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) {</div><div class="line">            tx = x+dx[i], ty = y+dy[i];</div><div class="line">            <span class="keyword">if</span>(tx &lt; <span class="number">0</span> || ty &lt; <span class="number">0</span> || tx &gt;= r || ty &gt;= c)</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">if</span>(used[tx][ty] == <span class="number">0</span> &amp;&amp; pattern[tx][ty] == <span class="string">'.'</span>) {</div><div class="line">                used[tx][ty] = <span class="number">1</span>;</div><div class="line">                X.push(tx), Y.push(ty);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> cond4(<span class="keyword">int</span> r, <span class="keyword">int</span> c) {</div><div class="line">    <span class="keyword">int</span> i, j;</div><div class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; r-<span class="number">1</span>; i++) {</div><div class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; c-<span class="number">1</span>; j++) {</div><div class="line">            <span class="keyword">bool</span> flag = (pattern[i][j] == <span class="string">'.'</span> || pattern[i][j+<span class="number">1</span>] == <span class="string">'.'</span> ||</div><div class="line">                         pattern[i+<span class="number">1</span>][j] == <span class="string">'.'</span> || pattern[i+<span class="number">1</span>][j+<span class="number">1</span>] == <span class="string">'.'</span>);</div><div class="line">            <span class="keyword">if</span>(flag == <span class="keyword">false</span>)</div><div class="line">                <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line">	<span class="comment">// freopen("in.txt", "r+t", stdin);</span></div><div class="line">	<span class="comment">// freopen("out.txt", "w+t", stdout); </span></div><div class="line">    <span class="keyword">int</span> testcase;</div><div class="line">    <span class="keyword">int</span> r, c, n;</div><div class="line">    <span class="keyword">int</span> x, y, v, i, j, k;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;testcase);</div><div class="line">    <span class="keyword">while</span>(testcase--) {</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;r, &amp;c, &amp;n) != <span class="number">3</span>)</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="built_in">memset</span>(g, <span class="number">0</span>, <span class="keyword">sizeof</span>(g));</div><div class="line">        <span class="built_in">memset</span>(ug, <span class="number">0</span>, <span class="keyword">sizeof</span>(ug));</div><div class="line">        <span class="keyword">int</span> tot = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> ret = <span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++) {</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &amp;x, &amp;y, &amp;v);</div><div class="line">            g[x][y] = v;</div><div class="line">            ug[x][y] = <span class="number">1</span>;</div><div class="line">            tot += v;</div><div class="line">        }</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; r; i++)</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, &amp;pattern[i]);</div><div class="line">        <span class="keyword">int</span> cellcnt = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> unshaded = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; r; i++)</div><div class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; c; j++)</div><div class="line">                <span class="keyword">if</span>(pattern[i][j] == <span class="string">'#'</span>)</div><div class="line">                    cellcnt++, x = i, y = j;</div><div class="line">                <span class="keyword">else</span></div><div class="line">                    unshaded++;</div><div class="line">        <span class="keyword">if</span>(tot != unshaded) {</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"not solved"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span>(cellcnt &amp;&amp; !cond1(x, y, r, c, cellcnt)) {</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"not solved"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; r &amp;&amp; ret; i++) {</div><div class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; c &amp;&amp; ret; j++) {</div><div class="line">                <span class="keyword">if</span>(ug[i][j]) {</div><div class="line">                    ret &amp;= cond2(i, j, r, c);</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span>(!ret) {</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"not solved"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        }</div><div class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; r &amp;&amp; ret; i++) {</div><div class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; c &amp;&amp; ret; j++) {</div><div class="line">                <span class="keyword">if</span>(ug[i][j]) {</div><div class="line">                    ret &amp;= cond3(i, j, r, c);</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span>(!ret) {</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"not solved"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        }</div><div class="line">        ret &amp;= cond4(r, c);</div><div class="line">        <span class="keyword">if</span>(!ret) {</div><div class="line">            <span class="built_in">puts</span>(<span class="string">"not solved"</span>);</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        }</div><div class="line">        <span class="built_in">puts</span>(<span class="string">"solved"</span>);</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>

          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-12721" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/03/oj/uva/uva-12721/" class="article-date">
  <time datetime="2014-06-03T00:46:18.000Z" itemprop="datePublished">Jun 3 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/03/oj/uva/uva-12721/">UVa 12721 - Cheap B-Subsequence</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/06/03/oj/uva/uva-12721/" data-id="0p5awvsbo6x1dhbs" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/06/03/oj/uva/uva-12721/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dp/">dp</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p>Some time ago, Dejan Stojanovic, a Serbian poet, said: “Words rich in meaning can be cheap in sound<br>effects.” Is it true? A String Processing professor at UFPE wants to test this quote with strings. For that, he defined what he calls a “cheap B-subsequence”. A cheap B-subsequence, according to his definition, is a subsequence of size B, of a string S(B &lt;= |S|), that has the lowest associated cost. To define the cost of a string, the professor determined a series of rules to each letter of the alphabet. The alphabet that he used contains only lowercase letters. The rule of a letter is defined as a set of pairs (P<sub>i</sub>, C<sub>i</sub>), which indicates that if this letter appears in a position X on the subsequence, where X is a multiple of P<sub>i</sub>, then the cost of (X/P<sub>i</sub>) * C<sub>i</sub> will be added to the total cost of this subsequence. Let’s show an example. Suppose we have the following rules:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[a] = <span class="list">{(2, 3), (4, 10)}</span></div><div class="line">[b] = <span class="list">{(1, 4), (7, 50)}</span></div><div class="line">[c] = <span class="list">{(1, 2), (4, 20)}</span></div><div class="line">[d..z] = <span class="list">{ }</span> // there are no rules for the characters `d` to `z`</div></pre></td></tr></table></figure>

<p>Suppose we have the string <code>abaabcbc</code>, and B = 4. If we choose the subsequence <code>aabc</code> (abaabcbc), we would do the following procedure to calculate the associated cost:</p>
<ol>
<li><p>The first letter of the sequence is an <code>a</code>, and the position 1 is neither multiple of 2 or 4, so the cost is <code>0</code>;</p>
</li>
<li><p>The second letter of the sequence is another <code>a</code>, and the position 2 is a multiple of 2, so we’ll add the cost of <code>(2/2) * 3 = 3</code>;</p>
</li>
<li>The third letter of the sequence is a <code>b</code>, and the position 3 is multiple of 1, so we will add the cost of <code>(3/1) * 4 = 12</code>;</li>
<li>The last letter of the sequence is a <code>c</code>, and the position 4 is a multiple of 1 and 4, so we will add<br>the cost of <code>(4/1) * 2 + (4/4)* 20 = 28</code>.</li>
</ol>
<p>The total associated cost to this subsequence is 43, which is not the lowest cost, since we could have chosen aaab (abaabcbc) and obtained an associated cost of 19 | this is indeed the cost of the cheap B-subsequence. Given the string S and the integer B, and the rules of the alphabet, your task is to create a program that tells the professor the cost of the cheap B-subsequence.</p>
<h2 id="Input">Input</h2>
<p>The first line contains T (T &lt; 100)－　the number of test cases, after this line T test cases follows. The first line of a test case contains a string S of lowercase letters and an integer B<br>(1 &lt;= B &lt;= |S| &lt;= 100). Each of the next 26 lines describe the rule of each letter. The first of the 26 lines corresponds to the rule of the letter <code>a</code>; the following line corresponds to the rule of the letter <code>b</code>; the last of the 26 lines corresponds to the rule of the letter <code>z</code>. Each line containing a rule is described in the following way: </p>
<p>Q, P1, C1, P2, C2, … PQ, CQ</p>
<p>(1 &lt;= Q &lt;= 10; 1 &lt;= Pi &lt;= |S|; 1 &lt;= Ci &lt;= 50), where Q is the amount of pairs associated to this rule, and is followed by the pairs themselves.</p>
<h2 id="Output">Output</h2>
<p>For each test case print a line containing <code>Case #X: Y</code>, where X is the case number, starting at 1, and Y is the cost of the cheap B-subsequence.</p>
<h2 id="Sample_Input">Sample Input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="number">2</span></div><div class="line">abcd <span class="number">1</span></div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">20</span></div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">15</span></div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">8</span></div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">30</span></div><div class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">2</span></div><div class="line"><span class="number">0</span> (<span class="number">21</span> <span class="keyword">lines</span>)</div><div class="line">abaabcbc <span class="number">4</span></div><div class="line"><span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">10</span></div><div class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">4</span> <span class="number">7</span> <span class="number">50</span></div><div class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">2</span> <span class="number">4</span> <span class="number">20</span></div><div class="line"><span class="number">0</span> (<span class="number">23</span> <span class="keyword">lines</span>)</div></pre></td></tr></table></figure>

<h2 id="Sample_Output">Sample Output</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Case</span> <span class="comment">#1: 8</span></div><div class="line"><span class="keyword">Case</span> <span class="comment">#2: 19</span></div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<p><strong> 題目描述： </strong></p>
<p>找一個長度為 <code>B</code> 的 subsequence，並且每一個字符成本如題目所定義，求最小構成成本。</p>
<p><strong> 題目解法： </strong></p>
<p>動態規劃，狀態 dp[length][subsequence_index]</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;vector&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;algorithm&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> dp[<span class="number">128</span>][<span class="number">128</span>], cost[<span class="number">26</span>][<span class="number">128</span>];</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line">	<span class="keyword">int</span> testcase, cases = <span class="number">0</span>;</div><div class="line">	<span class="keyword">char</span> S[<span class="number">128</span>];</div><div class="line">	<span class="keyword">int</span> B, P, C, N, M;</div><div class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;testcase);</div><div class="line">	<span class="keyword">while</span>(testcase--) {		</div><div class="line">		<span class="built_in">scanf</span>(<span class="string">"%s %d"</span>, S+<span class="number">1</span>, &amp;B);</div><div class="line">		</div><div class="line">		N = <span class="built_in">strlen</span>(S+<span class="number">1</span>);</div><div class="line">		<span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</div><div class="line">		<span class="built_in">memset</span>(cost, <span class="number">0</span>, <span class="keyword">sizeof</span>(cost));</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) {</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;M);</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; M; j++) {</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;P, &amp;C);</div><div class="line">				<span class="keyword">int</span> oP = P;</div><div class="line">				<span class="keyword">while</span>(oP &lt;= N)</div><div class="line">					cost[i][oP] += oP / P * C, oP += P;</div><div class="line">			}</div><div class="line">		}		</div><div class="line"></div><div class="line">		dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; B; i++) {</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= N; j++) {</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> k = j + <span class="number">1</span>; k &lt;= N; k++) {</div><div class="line">					<span class="keyword">int</span> c = cost[S[k] - <span class="string">'a'</span>][i + <span class="number">1</span>];</div><div class="line">					dp[i+<span class="number">1</span>][k] = min(dp[i+<span class="number">1</span>][k], dp[i][j] + c);</div><div class="line">				}</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="keyword">int</span> ret = <span class="number">0x3f3f3f3f</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</div><div class="line">			ret = min(ret, dp[B][i]);</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>, ++cases, ret);</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="comment">/*</span></div><div class="line">2</div><div class="line">abcd 1</div><div class="line">1 1 20</div><div class="line">1 1 15</div><div class="line">1 1 8</div><div class="line">1 1 30</div><div class="line">1 1 2</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">abaabcbc 4</div><div class="line">2 2 3 4 10</div><div class="line">2 1 4 7 50</div><div class="line">2 1 2 4 20</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line">0</div><div class="line"></div><div class="line">*/</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-181" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/03/oj/uva/uva-181/" class="article-date">
  <time datetime="2014-06-03T00:04:44.000Z" itemprop="datePublished">Jun 3 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/03/oj/uva/uva-181/">UVa 181 - Hearts</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/06/03/oj/uva/uva-181/" data-id="9e038vtwb6ex1i9v" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/06/03/oj/uva/uva-181/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/撲克/">撲克</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/模擬/">模擬</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p>There are 52 playing cards in a pack, divided into suits, and, within suits, into denominations. The suits are (in order, lowest to highest) Clubs, Diamonds, Hearts and Spades, abbreviated C, D, H and S. The 13 denominations (or face values) are (from lowest to highest): 2, 3, 4, 5, 6, 7, 8, 9, 10 (T), Jack (J), Queen (Q), King (K) and Ace(A). A higher card will beat a lower card in the same suit, but will not usually beat any other card in a different suit. An exception to this is the <code>trump</code> suit—if a suit is designated to be a trump suit (by whatever means the rules of the game allow), then any card of that suit will beat any card of any other suit.</p>
<blockquote>
<p>撲克共有 52 張牌，總共有 4 種花色 (C &lt; D &lt; H &lt; S, 梅花 &lt; 方塊 &lt; 紅心 &lt; 黑桃)，每 1 種花色有 13 張牌，由小到大的點數分別是 2, 3, 4, 5, 6, 7, 8, 9, 10 (T), Jack (J), Queen (Q), King (K) and Ace(A)，點數大的可以勝過點數小的。在遊戲中可以選定 <code>王牌</code> 的花色，王牌可以贏過任一其他花色的牌。</p>
</blockquote>
<p>A simplified version of an old card game called Hearts is played as follows. The dealer deals cards clockwise, one by one, face downward, to four other players and himself, starting with the player on his left, who thus gets the first card, followed by the sixth, and so on, while the dealer gets the fifth card, followed by the tenth, and so on. When each player has 10 cards there will be two left—these are exposed and the suit of the one of higher denomination determines the trump suit. If there is a tie, then the highest ranking suit becomes the trump suit.</p>
<blockquote>
<p><code>Hearts</code> 是一款早期的簡化版卡牌遊戲，總共有 5 名玩家，發牌者將會順時針從自己的左手邊第一個玩家依序發給每一個玩家，因此發牌者自己將會拿到第 5 張、第 10 張、 … 等。最後，每名玩家將會有 10 張牌，剩下的兩張牌點數高的那張牌的花色將是王牌花色，如果點數相同，則原本由原本花色大的被選為王牌花色。</p>
</blockquote>
<p>A <code>game</code> consists of 10 <code>tricks</code>, each containing 5 cards, one from each player. For each trick, one player <code>leads</code>, i.e. plays a card face up on the table, the rest of the players then `follow’, in clockwise order. The player to the dealer’s left leads to the first trick, thereafter the winner of each trick leads to the next trick. A player must follow suit if possible, i.e. play a card of the same suit as the one lead. If he cannot, then he must trump it (play a card of the designated trump suit). If he cannot trump it (because he has no cards in the trump suit), he discards a card. If a trick is trumped, then the person playing the highest trump wins the trick, otherwise the person playing the highest card of the correct suit wins it.</p>
<blockquote>
<p>這場遊戲共計 10 輪，每一輪每名玩家各出 1 張牌，因此共計 5 張。在每一輪中，將會有一名玩家擔任 <code>首發</code>，首發將決定這一輪的花色，而剩餘的玩家按照順時針順序出牌。在這一輪中，獲勝者將成為下一輪的首發，並且將可以得到這一輪所有紅心的分數。每名玩家必須盡可能出這一輪所需要的花色，如果沒有所需花色，打出王牌將可以勝過其他非王牌的出牌，如果有數名玩家接打出王牌，則出點數較高王牌的玩家獲勝。</p>
</blockquote>
<p>Strategies are as follows:</p>
<ul>
<li>Leader: The leader always plays the highest card in his hand. If there is a tie and one of the cards is a trump card, then he leads the trump, otherwise he plays the highest ranking suit.</li>
<li>Follower: If possible he must play the highest card in his hand of the correct suit. If he has no cards in that suit then he plays the highest trump he has. If he cannot trump it he plays the highest card in his hand, breaking ties as previously specified. </li>
</ul>
<blockquote>
<p>策略如下所述：</p>
<ul>
<li>首發：將會從發中挑一個最高點數的牌，如果點數相同，則會先挑王牌花色的那一張，如果沒有王牌花色，則出花色排名最高的那一張。</li>
<li>跟隨者：將打出該輪所需花色的最高點數牌。如果沒有所需花色，將會打出手上點數最高的王牌，如果還是沒有王牌，則將打出最高點數的牌，若點數相同將打出最高花色的那張。</li>
</ul>
</blockquote>
<p>When all the tricks have been played, each player examines the tricks he has taken and scores the face value of any Heart he has (Jack counts 11, Queen counts 12, King counts 13 and Ace counts 14). This score is recorded.</p>
<blockquote>
<p>在每一輪，獲勝者將會拿到該輪出牌 5 張中紅心的點數，並且加入到自己的得分中。</p>
</blockquote>
<p>Write a program to simulate the playing of this game.</p>
<h2 id="Input">Input</h2>
<p>Input will consist of a series of decks of cards, each deck spread over four lines as shown below. The file will be terminated by a line consisting of a single #.</p>
<h2 id="Output">Output</h2>
<p>Output will consist of a series of lines, one for each deck in the input. Each line will consist of 5 numbers reflecting the scores of the individual players, starting with the dealer and proceeding clockwise through the rest of the players. Each score will consist of a number right justified in a field of width 3.</p>
<h2 id="Sample_input">Sample input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">TS QC 8S <span class="number">8D</span> QH <span class="number">2D</span> <span class="number">3H</span> KH <span class="number">9H</span> <span class="number">2H</span> TH KS KC</div><div class="line"><span class="number">9D</span> JH <span class="number">7H</span> JD 2S QS TD 2C <span class="number">4H</span> <span class="number">5H</span> AD <span class="number">4D</span> <span class="number">5D</span></div><div class="line"><span class="number">6D</span> 4S 9S 5S 7S <span class="keyword">JS</span> <span class="number">8H</span> <span class="number">3D</span> 8C 3S 4C 6S 9C</div><div class="line">AS 7C <span class="number">AH</span> <span class="number">6H</span> KD <span class="keyword">JC</span> <span class="number">7D</span> AC 5C TC QD 6C 3C</div><div class="line">#</div></pre></td></tr></table></figure>

<h2 id="Sample_output">Sample output</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">22  0 68  0 14</div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt; </span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;vector&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;algorithm&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> suitW(<span class="keyword">char</span> c) {</div><div class="line">	<span class="keyword">switch</span>(c) {</div><div class="line">		<span class="keyword">case</span> <span class="string">'C'</span>:<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">'D'</span>:<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">'H'</span>:<span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">'S'</span>:<span class="keyword">return</span> <span class="number">3</span>;</div><div class="line">	}</div><div class="line">}</div><div class="line"><span class="keyword">int</span> cardW(<span class="keyword">char</span> c) {</div><div class="line">	<span class="keyword">switch</span>(c) {</div><div class="line">		<span class="keyword">case</span> <span class="string">'2'</span>...<span class="string">'9'</span>:<span class="keyword">return</span> c - <span class="string">'0'</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">'T'</span>:<span class="keyword">return</span> <span class="number">10</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">'J'</span>:<span class="keyword">return</span> <span class="number">11</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">'Q'</span>:<span class="keyword">return</span> <span class="number">12</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">'K'</span>:<span class="keyword">return</span> <span class="number">13</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">'A'</span>:<span class="keyword">return</span> <span class="number">14</span>;</div><div class="line">	}</div><div class="line">}</div><div class="line"><span class="keyword">char</span> decideTrump(<span class="keyword">const</span> <span class="keyword">char</span> c1[], <span class="keyword">const</span> <span class="keyword">char</span> c2[]) {</div><div class="line">	<span class="keyword">if</span>(cardW(c1[<span class="number">0</span>]) != cardW(c2[<span class="number">0</span>]))</div><div class="line">		<span class="keyword">return</span> cardW(c1[<span class="number">0</span>]) &gt; cardW(c2[<span class="number">0</span>]) ? c1[<span class="number">1</span>] : c2[<span class="number">1</span>];</div><div class="line">	<span class="keyword">return</span> suitW(c1[<span class="number">1</span>]) &gt; suitW(c2[<span class="number">1</span>]) ? c1[<span class="number">1</span>] : c2[<span class="number">1</span>];</div><div class="line">}</div><div class="line"><span class="keyword">int</span> leaderCmp(<span class="built_in">string</span> c1, <span class="built_in">string</span> c2) {</div><div class="line">	<span class="keyword">if</span>(cardW(c1[<span class="number">0</span>]) != cardW(c2[<span class="number">0</span>]))</div><div class="line">		<span class="keyword">return</span> cardW(c1[<span class="number">0</span>]) &gt; cardW(c2[<span class="number">0</span>]);</div><div class="line">	<span class="keyword">return</span> suitW(c1[<span class="number">1</span>]) &gt; suitW(c2[<span class="number">1</span>]);</div><div class="line">}</div><div class="line"><span class="built_in">string</span> leaderPlay(<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;</span> &amp;hand, <span class="keyword">char</span> trump) {</div><div class="line">	sort(hand.begin(), hand.end(), leaderCmp);</div><div class="line">	<span class="keyword">int</span> h = hand[<span class="number">0</span>][<span class="number">0</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;</span>::iterator it = hand.begin(); </div><div class="line">		it != hand.end(); it++) {</div><div class="line">		<span class="keyword">if</span>((*it)[<span class="number">1</span>] == trump &amp;&amp; (*it)[<span class="number">0</span>] == h) {</div><div class="line">			<span class="built_in">string</span> ret = *it;</div><div class="line">			hand.erase(it);</div><div class="line">			<span class="keyword">return</span> ret;</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="built_in">string</span> ret = hand[<span class="number">0</span>];</div><div class="line">	hand.erase(hand.begin());</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">}</div><div class="line"><span class="built_in">string</span> followerPlay(<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;</span> &amp;hand, <span class="keyword">char</span> suit, <span class="keyword">char</span> trump) {</div><div class="line">	sort(hand.begin(), hand.end(), leaderCmp);</div><div class="line">	<span class="keyword">for</span>(<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;</span>::iterator it = hand.begin(); </div><div class="line">		it != hand.end(); it++) {</div><div class="line">		<span class="keyword">if</span>((*it)[<span class="number">1</span>] == suit) {</div><div class="line">			<span class="built_in">string</span> ret = *it;</div><div class="line">			hand.erase(it);</div><div class="line">			<span class="keyword">return</span> ret;</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="keyword">for</span>(<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;</span>::iterator it = hand.begin(); </div><div class="line">		it != hand.end(); it++) {</div><div class="line">		<span class="keyword">if</span>((*it)[<span class="number">1</span>] == trump) {</div><div class="line">			<span class="built_in">string</span> ret = *it;</div><div class="line">			hand.erase(it);</div><div class="line">			<span class="keyword">return</span> ret;</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="built_in">string</span> ret = hand[<span class="number">0</span>];</div><div class="line">	hand.erase(hand.begin());</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line">	<span class="keyword">char</span> deckCard[<span class="number">52</span>][<span class="number">128</span>];</div><div class="line">	<span class="keyword">const</span> <span class="keyword">int</span> tricks = <span class="number">10</span>;</div><div class="line">	<span class="keyword">do</span> {</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">52</span>; i++) {</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, deckCard[i]);</div><div class="line">			<span class="keyword">if</span>(!<span class="built_in">strcmp</span>(deckCard[i], <span class="string">"#"</span>))</div><div class="line">				<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">		}</div><div class="line">		<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;</span> hand[<span class="number">5</span>];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++, j = (j+<span class="number">1</span>)%<span class="number">5</span>) {</div><div class="line">			hand[j].push_back(deckCard[i]);</div><div class="line">		}</div><div class="line">		</div><div class="line">		<span class="keyword">char</span> trump = decideTrump(deckCard[<span class="number">50</span>], deckCard[<span class="number">51</span>]);</div><div class="line">		<span class="keyword">int</span> leader = <span class="number">0</span>;</div><div class="line">		<span class="keyword">int</span> scores[<span class="number">5</span>] = {};</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tricks; i++) {</div><div class="line">			<span class="stl_container"><span class="built_in">vector</span>&lt; pair&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;</span> &gt; desk;</div><div class="line">			desk.push_back(make_pair(leaderPlay(hand[leader], trump), leader));</div><div class="line">			<span class="keyword">char</span> suit = desk[<span class="number">0</span>].first[<span class="number">1</span>];</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = (leader + <span class="number">1</span>)%<span class="number">5</span>, k = <span class="number">0</span>; k &lt; <span class="number">4</span>; j = (j+<span class="number">1</span>)%<span class="number">5</span>, k++) {</div><div class="line">				desk.push_back(make_pair(followerPlay(hand[j], suit, trump), j));</div><div class="line">			}</div><div class="line">			<span class="keyword">int</span> maxCardW = -<span class="number">1</span>;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; desk.size(); j++) {</div><div class="line">				<span class="comment">// printf("PLAYER %d play %s\n", desk[j].second + 1, desk[j].first.c_str());</span></div><div class="line">				<span class="keyword">if</span>(desk[j].first[<span class="number">1</span>] == trump &amp;&amp; suit != trump) {</div><div class="line">					suit = trump;</div><div class="line">					maxCardW = cardW(desk[j].first[<span class="number">0</span>]);</div><div class="line">					leader = desk[j].second;</div><div class="line">				}</div><div class="line">				<span class="keyword">if</span>(suit == desk[j].first[<span class="number">1</span>] &amp;&amp; cardW(desk[j].first[<span class="number">0</span>]) &gt; maxCardW) {</div><div class="line">					maxCardW = cardW(desk[j].first[<span class="number">0</span>]);</div><div class="line">					leader = desk[j].second;</div><div class="line">				}</div><div class="line">			}</div><div class="line">			<span class="comment">/*</span></div><div class="line">			printf("PLAYER %d is the winner\n", leader + 1);</div><div class="line">			for(int j = 0; j &lt; 5; j++) {</div><div class="line">				for(int k = 0; k &lt; hand[j].size(); k++)</div><div class="line">					printf(" %2d%c ", cardW(hand[j][k][0]), hand[j][k][1]);</div><div class="line">				puts("");</div><div class="line">			}*/</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; desk.size(); j++) {</div><div class="line">				<span class="keyword">if</span>(desk[j].first[<span class="number">1</span>] == <span class="string">'H'</span>) {</div><div class="line">					<span class="comment">// printf("GET %d\n", cardW(desk[j].first[0]));</span></div><div class="line">					scores[leader] += cardW(desk[j].first[<span class="number">0</span>]);</div><div class="line">				}</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%3d"</span>, scores[<span class="number">4</span>]);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%3d"</span>, scores[i]);</div><div class="line">		<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">	} <span class="keyword">while</span>(<span class="keyword">true</span>);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-1051" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/03/oj/uva/uva-1051/" class="article-date">
  <time datetime="2014-06-02T23:34:20.000Z" itemprop="datePublished">Jun 3 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/03/oj/uva/uva-1051/">UVa 1051 - Bipartite Numbers</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/06/03/oj/uva/uva-1051/" data-id="b0pbzqyuwqpf3esu" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/06/03/oj/uva/uva-1051/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bfs/">bfs</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p>The executive officers of the company where you work want to send each other encrypted messages. Rather than use off-the-shelf encryption software such as PGP, they have tasked the IT staff with handling the encryption problem. The IT staff decided on a solution that requires <code>public</code> and <code>private</code> integer keys. The idea is that everyone can see your public key, but only you know your private key.</p>
<p>Your best friend in the company is a wonderful person but a not-so-wonderful programmer. He has created a publicprivate key scheme as follows. A public key can be any positive integer. The corresponding private key is the smallest bipartite number that is greater than and a multiple of the public key.</p>
<p>A bipartite number is any positive integer that contains exactly 2 distinct decimal digits s and t such that s is not 0 and all occurrences of s precede all occurrences of t. For example 44444411 is bipartite (s is 4 and t is 1), So are 41, 10000000, and 5555556. However, neither 4444114 nor 44444 are bipartite.</p>
<p>Notice that the large bipartite number 88888888888800000 can be nicely described as 12 8’s followed by 5 0’s. You can express any bipartite number using four numbers: m s n t. The numbers s and t are the leading and trailing digits as described above, m is the number of times the digit s appears in the bipartite number, and n is the number of times the digit t appears.</p>
<p>The trouble with your friend’s scheme is that it is not too difficult to compute a private key if you know the public key. You need to convince your friend that his public-private key scheme is inadequate before he loses his job over his bad decision! You must write a program that takes public keys as input and displays the corresponding private keys.</p>
<h2 id="Input">Input</h2>
<p>The input consists of several test cases. Each test case is on a separate line, and it consists of a single public key in the range 1…99999.</p>
<p>The last case is followed by a line containing the integer zero.</p>
<h2 id="Output">Output</h2>
<p>For each test case, display a line consisting of the public key, a colon, then 4 integers m s n t where m, n, s, and t are as described above.</p>
<h2 id="Sample_Input">Sample Input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">125 </div><div class="line">17502 </div><div class="line">2005 </div><div class="line">0</div></pre></td></tr></table></figure>

<h2 id="Sample_Output">Sample Output</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">125</span>: <span class="string">1 5 2 0 </span></div><div class="line"><span class="attribute">17502</span>: <span class="string">4 7 4 8 </span></div><div class="line"><span class="attribute">2005</span>: <span class="string">3 2 3 5</span></div></pre></td></tr></table></figure>

<hr>
<p>Claimer: The data used in this problem is unofficial data prepared by Derek Kisman. So any mistake here does not imply mistake in the offcial judge data. Only Derek Kisman is responsible for the mistakes. Report mistakes to dkisman@acm.org </p>
<h2 id="Solution">Solution</h2>
<p><strong> 題目描述： </strong></p>
<p>現在找一個 public key，這個 public key 符合 format <code>xxx...xyyy...y</code>，其中 x, y 是 <code>0-9</code> 構成的。</p>
<p>而你的 private key N 是給定的，接著找一個符合規定的 public key，是 N 的倍數且最大於 N 的最小值。</p>
<p><strong> 題目解法： </strong></p>
<p>題目給定的最大值 <code>88888888888800000</code> 沒有任何意義。可能會超過好幾位，連 long long 64 bits 都裝不下。</p>
<p>需要廣度搜索來完成，但是要找到 <code>public key &gt; N</code> 會有點麻煩。</p>
<ul>
<li>一開始嘗試在最大值下面建表查找，但卡了很多 WA，後來發現不合理的測資。</li>
<li>之後採用類似最短路徑的 BFS，藉由狀態 <code>dist[MOD][2]</code> 找到最小長度。但是這種作法不容易處理 <code>&gt; N</code> 的判斷。</li>
<li>因此，採用一個迭代窮舉，窮舉最後的 <code>public key</code> 長度，然後找切割的位置分配給 <code>x</code>, <code>y</code>。</li>
</ul>
<p>但是這樣做還是很容易 TLE，我們特別對 10 的倍數作調整，這些亂做不好說明。</p>
<p><strong> 更多 More </strong><br>可以先把輸入讀進來，然後一次做完分析的離散處理，說不定會比較快。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Accepted</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;vector&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;queue&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;algorithm&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">struct</span> ELE {</div><div class="line">	<span class="keyword">int</span> m, s, n, t;</div><div class="line">	ELE(<span class="keyword">int</span> a = <span class="number">0</span>, <span class="keyword">int</span> b = <span class="number">0</span>, <span class="keyword">int</span> c = <span class="number">0</span>, <span class="keyword">int</span> d = <span class="number">0</span>):</div><div class="line">		m(a), s(b), n(c), t(d) {}</div><div class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> ELE &amp;x) <span class="keyword">const</span> {</div><div class="line">		<span class="keyword">if</span>(m + n != x.m + x.n)</div><div class="line">			<span class="keyword">return</span> m + n &lt; x.m + x.n;</div><div class="line">		<span class="keyword">if</span>(s != x.s)</div><div class="line">			<span class="keyword">return</span> s &lt; x.s;</div><div class="line">		<span class="keyword">if</span>(m != x.m)</div><div class="line">			<span class="keyword">return</span> s &lt; x.t;</div><div class="line">		<span class="keyword">return</span> t &lt; x.t;</div><div class="line">	}</div><div class="line">};</div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> MAXL 9999</span></div><div class="line"><span class="keyword">int</span> M1[MAXL];</div><div class="line"><span class="keyword">int</span> M10[MAXL];</div><div class="line"></div><div class="line"><span class="keyword">int</span> largeN(<span class="keyword">int</span> N, ELE key) {</div><div class="line">	<span class="keyword">if</span>(key.m + key.n &gt; <span class="number">5</span>) <span class="comment">// &gt; 100000</span></div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	<span class="keyword">int</span> tmp = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; key.m; i++)</div><div class="line">		tmp = tmp * <span class="number">10</span> + key.s;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; key.n; i++)</div><div class="line">		tmp = tmp * <span class="number">10</span> + key.t;</div><div class="line">	<span class="keyword">return</span> tmp &gt; N;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line"><span class="comment">//	freopen("in.txt", "r+t", stdin);</span></div><div class="line"><span class="comment">//	freopen("out2.txt", "w+t", stdout);   </span></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> N; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;N) == <span class="number">1</span> &amp;&amp; N; ) {</div><div class="line">		</div><div class="line">		M1[<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">		M10[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; MAXL; i++) {</div><div class="line">			M1[i] = (M1[i-<span class="number">1</span>] * <span class="number">10</span> + <span class="number">1</span>)%N;</div><div class="line">			M10[i] = (M10[i-<span class="number">1</span>] * <span class="number">10</span>)%N;</div><div class="line">		}</div><div class="line">		</div><div class="line">		ELE key(MAXL);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> len = <span class="number">2</span>; len &lt; MAXL; len++) {</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = N%<span class="number">10</span> || len &lt;= <span class="number">20</span> ? <span class="number">1</span> : len - <span class="number">20</span>; i &lt; len; i++) {</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> p = <span class="number">1</span>; p &lt; <span class="number">10</span>; p++) {</div><div class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> q = <span class="number">0</span>; q &lt; <span class="number">10</span>; q++) {</div><div class="line">						<span class="keyword">if</span>(p == q)</div><div class="line">							<span class="keyword">continue</span>;</div><div class="line">						<span class="keyword">long</span> <span class="keyword">long</span> m = ((<span class="keyword">long</span> <span class="keyword">long</span>)M1[i] * M10[len - i] * p + M1[len - i] * q)%N;</div><div class="line">						ELE tkey(i, p, len - i, q);</div><div class="line">						<span class="keyword">if</span>(m == <span class="number">0</span> &amp;&amp; largeN(N, tkey) &amp;&amp; tkey &lt; key) {</div><div class="line">							key = tkey;</div><div class="line">						}</div><div class="line">					}</div><div class="line">				}</div><div class="line">			}</div><div class="line">			<span class="keyword">if</span>(key.m != MAXL)</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">		}</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%d: %d %d %d %d\n"</span>, N, </div><div class="line">			key.m, key.s, key.n, key.t);</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="comment">/*</span></div><div class="line">190</div><div class="line">24822</div><div class="line">344</div><div class="line">4455</div><div class="line">*/</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-1030" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/31/oj/uva/uva-1030/" class="article-date">
  <time datetime="2014-05-31T12:06:01.000Z" itemprop="datePublished">May 31 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/31/oj/uva/uva-1030/">UVa 1030 - Image Is Everything</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/31/oj/uva/uva-1030/" data-id="7mszsea534zlldbu" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/31/oj/uva/uva-1030/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/迭代更新/">迭代更新</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p>Your new company is building a robot that can hold small lightweight objects. The robot will have the intelligence to determine if an object is light enough to hold. It does this by taking pictures of the object from the 6 cardinal directions, and then inferring an upper limit on the object’s weight based on those images. You must write a program to do that for the robot.</p>
<p>You can assume that each object is formed from an N×N×N lattice of cubes, some of which may be missing. Each 1×1×1 cube weighs 1 gram, and each cube is painted a single solid color. The object is not necessarily connected.</p>
<h2 id="Input">Input</h2>
<p>The input for this problem consists of several test cases representing different objects. Every case begins with a line containing N, which is the size of the object ( 1 &lt;= N &lt;= 10). The next N lines are the different N×N views of the object, in the order front, left, back, right, top, bottom. Each view will be separated by a single space from the view that follows it. The bottom edge of the top view corresponds to the top edge of the front view. Similarly, the top edge of the bottom view corresponds to the bottom edge of the front view. In each view, colors are represented by single, unique capital letters, while a period (.) indicates that the object can be seen through at that location.</p>
<p>Input for the last test case is followed by a line consisting of the number 0.</p>
<h2 id="Output">Output</h2>
<p>For each test case, print a line containing the maximum possible weight of the object, using the format shown below.</p>
<h2 id="Sample_Input">Sample Input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="number">3</span></div><div class="line">.<span class="variable">R</span>. <span class="variable">YYR</span> .<span class="variable">Y</span>. <span class="variable">RYY</span> .<span class="variable">Y</span>. .<span class="variable">R</span>.</div><div class="line"><span class="variable">GRB</span> <span class="variable">YGR</span> <span class="variable">BYG</span> <span class="variable">RBY</span> <span class="variable">GYB</span> <span class="variable">GRB</span></div><div class="line">.<span class="variable">R</span>. <span class="variable">YRR</span> .<span class="variable">Y</span>. <span class="variable">RRY</span> .<span class="variable">R</span>. .<span class="variable">Y</span>.</div><div class="line"><span class="number">2</span></div><div class="line"><span class="variable">ZZ</span> <span class="variable">ZZ</span> <span class="variable">ZZ</span> <span class="variable">ZZ</span> <span class="variable">ZZ</span> <span class="variable">ZZ</span></div><div class="line"><span class="variable">ZZ</span> <span class="variable">ZZ</span> <span class="variable">ZZ</span> <span class="variable">ZZ</span> <span class="variable">ZZ</span> <span class="variable">ZZ</span></div><div class="line"><span class="number">0</span></div></pre></td></tr></table></figure>

<h2 id="Sample_Output">Sample Output</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Maximum weigh<span class="variable">t:</span> <span class="number">11</span> gram(<span class="keyword">s</span>)</div><div class="line">Maximum weigh<span class="variable">t:</span> <span class="number">8</span> gram(<span class="keyword">s</span>)</div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<p><strong> 題目描述：</strong></p>
<p>現在有一些著色的立方體 1x1x1，每一個立方小塊會由一個顏色構成， 然後這些立方塊會疊在一起，最大為 N <em> N </em> N 。機器人在周圍拍照，將六個影像傳回來，請問現在最多可能有多少立方塊。</p>
<p><strong> 題目解法：</strong></p>
<p>這題最麻煩的是座標假想。</p>
<p>現在眼前有一個立方體，而前方是 Y 軸正向，右手是 X 軸正向，上方是 Z 軸正向。</p>
<p>而對於每一個面來說，機器人相當於在 X-Y 平面上走動。拍攝的時候，X 軸是往下方正向，Y 軸是往右方正向。</p>
<p>接著，先把空洞挖掉。再者，把所有可能進行標記，接著嘗試把那一面貼上去，對於不符合顏色的立方塊拔掉，直到六個面都屬於符合的狀態 (迭代更新)。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt; </span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">char</span> cube[<span class="number">16</span>][<span class="number">16</span>][<span class="number">16</span>];</div><div class="line"><span class="comment">// front, left, back, right, top, bottom</span></div><div class="line"><span class="keyword">void</span> getXYZ(<span class="keyword">int</span> N, <span class="keyword">int</span> kind, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> d, <span class="keyword">int</span> &amp;rx, <span class="keyword">int</span> &amp;ry, <span class="keyword">int</span> &amp;rz) {</div><div class="line">	<span class="keyword">switch</span>(kind) {</div><div class="line">		<span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">			rx = y, ry = d, rz = N - x - <span class="number">1</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">			rx = d, ry = N - y - <span class="number">1</span>, rz = N - x - <span class="number">1</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">			rx = N - y - <span class="number">1</span>, ry = N - d - <span class="number">1</span>, rz = N - x - <span class="number">1</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">			rx = N - d - <span class="number">1</span>, ry = y, rz = N - x - <span class="number">1</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">4</span>:</div><div class="line">			rx = y, ry = N - x - <span class="number">1</span>, rz = N - d - <span class="number">1</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="number">5</span>:</div><div class="line">			rx = y, ry = x, rz = d;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">	}</div><div class="line">}</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line">	<span class="keyword">char</span> views[<span class="number">6</span>][<span class="number">16</span>][<span class="number">16</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> N; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;N) == <span class="number">1</span> &amp;&amp; N; )  {</div><div class="line">		<span class="keyword">int</span> x, y, z;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) {</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">6</span>; j++)</div><div class="line">				<span class="built_in">scanf</span>(<span class="string">"%s"</span>, &amp;views[j][i]);</div><div class="line">		}</div><div class="line">		</div><div class="line">		<span class="built_in">memset</span>(cube, <span class="string">'?'</span>, <span class="keyword">sizeof</span>(cube));</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">6</span>; k++) {</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) {</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N; j++) {</div><div class="line">					<span class="keyword">if</span>(views[k][i][j] != <span class="string">'.'</span>)</div><div class="line">						<span class="keyword">continue</span>;</div><div class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> d = <span class="number">0</span>; d &lt; N; d++) {</div><div class="line">						getXYZ(N, k, i, j, d, x, y, z);</div><div class="line">						cube[x][y][z] = <span class="string">'.'</span>;</div><div class="line">					}</div><div class="line">				}</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="keyword">bool</span> update = <span class="keyword">false</span>;</div><div class="line">		<span class="keyword">do</span> {</div><div class="line">			update = <span class="keyword">false</span>;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">6</span>; k++) {</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) {</div><div class="line">					<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N; j++) {</div><div class="line">						<span class="keyword">if</span>(views[k][i][j] == <span class="string">'.'</span>)</div><div class="line">							<span class="keyword">continue</span>;</div><div class="line">						<span class="keyword">for</span>(<span class="keyword">int</span> d = <span class="number">0</span>; d &lt; N; d++) {</div><div class="line">							getXYZ(N, k, i, j, d, x, y, z);</div><div class="line">							<span class="keyword">if</span>(cube[x][y][z] == <span class="string">'.'</span>)</div><div class="line">								<span class="keyword">continue</span>;</div><div class="line">							<span class="keyword">if</span>(cube[x][y][z] == <span class="string">'?'</span>) {</div><div class="line">								cube[x][y][z] = views[k][i][j];</div><div class="line">								update = <span class="keyword">true</span>;</div><div class="line">								<span class="keyword">break</span>;</div><div class="line">							} <span class="keyword">else</span> <span class="keyword">if</span>(cube[x][y][z] == views[k][i][j]) {</div><div class="line">								<span class="keyword">break</span>;	</div><div class="line">							} <span class="keyword">else</span> {</div><div class="line">								cube[x][y][z] = <span class="string">'.'</span>;</div><div class="line">								update = <span class="keyword">true</span>;</div><div class="line">							}</div><div class="line">						}</div><div class="line">					}</div><div class="line">				}</div><div class="line">			}</div><div class="line">		} <span class="keyword">while</span>(update == <span class="keyword">true</span>);</div><div class="line">		</div><div class="line">		<span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N; j++)</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; N; k++)</div><div class="line">					ret += cube[i][j][k] != <span class="string">'.'</span>;</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"Maximum weight: %d gram(s)\n"</span>, ret);</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="comment">/*</span></div><div class="line">front, left, back, right, top, bottom.</div><div class="line">3</div><div class="line">.R. YYR .Y. RYY .Y. .R.</div><div class="line">GRB YGR BYG RBY GYB GRB</div><div class="line">.R. YRR .Y. RRY .R. .Y.</div><div class="line">2</div><div class="line">ZZ ZZ ZZ ZZ ZZ ZZ</div><div class="line">ZZ ZZ ZZ ZZ ZZ ZZ</div><div class="line">0</div><div class="line">*/</div></pre></td></tr></table></figure>


          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-675" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/31/oj/uva/uva-675/" class="article-date">
  <time datetime="2014-05-31T11:59:51.000Z" itemprop="datePublished">May 31 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/31/oj/uva/uva-675/">UVa 675 - Convex Hull of the Polygon</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/31/oj/uva/uva-675/" data-id="t7n9aowilmu4gto8" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/31/oj/uva/uva-675/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/凸包/">凸包</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p>Suppose that a polygon is represented by a set of integer coordinates, {(x0, y0), (x1, y1), (x2, y2), …, (xn, yn), (x0, y0)}. Please find the convex hull of the polygon, where a convex hull is the minimum bounding convex polygon and “convex” means the angle between two consecutive edges is less than 180o.</p>
<h2 id="Input_file">Input file</h2>
<p>Input consists of several datasets separated by a blank line. Each dataset contains a sequence of integer coordinates xi, yi, one in each line. All input sequence will contain at least 3 different points.</p>
<h2 id="Output">Output</h2>
<p>The output for each dataset should contain a sequence of integer coordinates xi, yi specifying the convex hull, each in a line. The first coordinate of the output sequence must be the first coordinate in the input sequence that belongs to the convex hull. The output sequence must be in counter-cockwise order. Print a blank line between datasets.</p>
<h2 id="Sample_Input">Sample Input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">0, 0</div><div class="line">2, 0</div><div class="line">1, 1</div><div class="line">2, 2</div><div class="line">0, 2</div><div class="line">0, 0</div></pre></td></tr></table></figure>

<h2 id="Sample_Output">Sample Output</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">0, 0</div><div class="line">2, 0</div><div class="line">2, 2</div><div class="line">0, 2</div><div class="line">0, 0</div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<p>題目相當單純要輸出凸包的結果，但是最痛恨的是輸出格式，要求從輸入順序中最小的開始打印。</p>
<p>莫名其妙地弄了很多 WA 出來，也許輸入有重複點的關係，所以把點附加輸入編號可能會有所錯誤，總是暴力查找一個哪個點是要開始打印的即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;algorithm&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">struct</span> Pt {</div><div class="line">    <span class="keyword">int</span> x, y;</div><div class="line">    Pt(<span class="keyword">int</span> a = <span class="number">0</span>, <span class="keyword">int</span> b = <span class="number">0</span>):</div><div class="line">        x(a), y(b) {}</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> {</div><div class="line">        <span class="keyword">if</span>(x != a.x)       </div><div class="line">            <span class="keyword">return</span> x &lt; a.x;</div><div class="line">        <span class="keyword">return</span> y &lt; a.y;</div><div class="line">    }   </div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> ==(<span class="keyword">const</span> Pt &amp;a) <span class="keyword">const</span> {</div><div class="line">        <span class="keyword">return</span> x == a.x &amp;&amp; y == a.y;</div><div class="line">    }</div><div class="line">};</div><div class="line"><span class="keyword">int</span> cross(Pt o, Pt a, Pt b) {</div><div class="line">    <span class="keyword">return</span> (a.x-o.x)*(b.y-o.y)-(a.y-o.y)*(b.x-o.x);</div><div class="line">}</div><div class="line"><span class="keyword">int</span> monotone(<span class="keyword">int</span> n, Pt p[], Pt ch[]) {</div><div class="line">    sort(p, p+n);</div><div class="line">    <span class="keyword">int</span> i, m = <span class="number">0</span>, t;</div><div class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++) {</div><div class="line">        <span class="keyword">while</span>(m &gt;= <span class="number">2</span> &amp;&amp; cross(ch[m-<span class="number">2</span>], ch[m-<span class="number">1</span>], p[i]) &lt;= <span class="number">0</span>)</div><div class="line">            m--;</div><div class="line">        ch[m++] = p[i];</div><div class="line">    }</div><div class="line">    <span class="keyword">for</span>(i = n-<span class="number">1</span>, t = m+<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) {</div><div class="line">        <span class="keyword">while</span>(m &gt;= t &amp;&amp; cross(ch[m-<span class="number">2</span>], ch[m-<span class="number">1</span>], p[i]) &lt;= <span class="number">0</span>)</div><div class="line">            m--;</div><div class="line">        ch[m++] = p[i];</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> m - <span class="number">1</span>;</div><div class="line">}</div><div class="line">Pt D[<span class="number">100005</span>], C[<span class="number">100005</span>&lt;&lt;<span class="number">1</span>], p;</div><div class="line">Pt I[<span class="number">100005</span>];</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line">	<span class="keyword">int</span> cases = <span class="number">0</span>;</div><div class="line">	<span class="keyword">char</span> s[<span class="number">1024</span>];</div><div class="line">	<span class="keyword">while</span>(gets(s)) {</div><div class="line">		<span class="keyword">if</span>(cases++ &gt; <span class="number">0</span>)</div><div class="line">			<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">		<span class="keyword">int</span> n = <span class="number">0</span>, m, x, y;</div><div class="line">		<span class="built_in">sscanf</span>(s, <span class="string">"%d, %d"</span>, &amp;x, &amp;y);</div><div class="line">		I[n] = D[n] = Pt(x, y);</div><div class="line">		n++;</div><div class="line">		<span class="keyword">while</span>(gets(s) &amp;&amp; s[<span class="number">0</span>] != <span class="string">'\0'</span>) {</div><div class="line">			<span class="built_in">sscanf</span>(s, <span class="string">"%d, %d"</span>, &amp;x, &amp;y);</div><div class="line">			I[n] = D[n] = Pt(x, y);</div><div class="line">			n++;</div><div class="line">		}</div><div class="line">		m = monotone(n, D, C);</div><div class="line">		<span class="keyword">int</span> mark = -<span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n &amp;&amp; mark == -<span class="number">1</span>; i++) {</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)</div><div class="line">				<span class="keyword">if</span>(C[j] == I[i]) {</div><div class="line">					mark = j;</div><div class="line">					<span class="keyword">break</span>;</div><div class="line">				}</div><div class="line">		}</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = mark; i &lt; m; i++)</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d, %d\n"</span>, C[i].x, C[i].y);	</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= mark; i++)</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%d, %d\n"</span>, C[i].x, C[i].y);	</div><div class="line">	}</div><div class="line">	</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-11260" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/31/oj/uva/uva-11260/" class="article-date">
  <time datetime="2014-05-31T11:48:22.000Z" itemprop="datePublished">May 31 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/31/oj/uva/uva-11260/">UVa 11260 - Odd Root Sum</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/31/oj/uva/uva-11260/" data-id="qzbe3uc0dhkqb446" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/31/oj/uva/uva-11260/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/規律/">規律</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/逆元/">逆元</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p>Given the value of an n you will have to find the modulo 100000000 value of the following expression:</p>
<p><code>floor(sqrt(1)) + floor(sqrt(3)) + floor(sqrt(5)) + ... + floor(sqrt(m))</code> , where m is the largest odd number not greater than n. Or in other words you will have to find the value of S where,</p>
<p><code>S = floor(sqrt(1)) + floor(sqrt(3)) + floor(sqrt(5)) + ... + floor(sqrt(m)) MOD 100000000</code></p>
<h2 id="Input">Input</h2>
<p>The input file contains at most 30000 lines of inputs. Each line contains a single 64-nit signed integer which denotes the value of n. Input is terminated by a line containing a single zero which should not b processed.</p>
<h2 id="Output">Output</h2>
<p>For each line of input produce one line of output. This line contains the value of S.</p>
<h2 id="Sample_Input">Sample Input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">9</div><div class="line">19</div><div class="line">29</div><div class="line">10000000</div><div class="line">0</div></pre></td></tr></table></figure>

<h2 id="Output_for_Sample_Input">Output for Sample Input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">9</div><div class="line">26</div><div class="line">49</div><div class="line">38426378</div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<p>先把前幾項列出來，會發現一個規律</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="number">11</span></div><div class="line"><span class="number">22</span></div><div class="line"><span class="number">3333</span></div><div class="line"><span class="number">4444</span></div><div class="line"><span class="number">555555</span></div><div class="line"><span class="number">666666</span></div><div class="line"><span class="number">77777777</span></div><div class="line"><span class="keyword">...</span></div></pre></td></tr></table></figure>

<p>每一次會增加兩個。</p>
<p>假設第 1 組為 <code>11 22</code>，第 2 組為 <code>3333 4444</code> …<br>需要使用二分搜尋找到我們總共要幾組，然後直接利用公式算出來 sigma(2i * (2i - 1 + 2i))。</p>
<p>但是公式算出來後，會有一個 <code>/3</code> 需要出處理，這邊使用乘法反元素，幸好 3 和 100000000 有互質，不然還真是沒有辦法避免大數運算，計算的時候請各種小心 overflow 的問題。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt; </span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;math.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;algorithm&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> MOD 100000000 </span></div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> inv(<span class="keyword">long</span> <span class="keyword">long</span> n, <span class="keyword">long</span> <span class="keyword">long</span> m) { <span class="comment">// get n*? = 1 (mod m)</span></div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> la = <span class="number">1</span>, lb = <span class="number">0</span>, ra = <span class="number">0</span>, rb = <span class="number">1</span>;</div><div class="line">    <span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">0</span>, t, mod = m;</div><div class="line">    <span class="keyword">while</span>(n%m) {</div><div class="line">        <span class="keyword">if</span>(!i) {</div><div class="line">            la -= n/m*ra;</div><div class="line">            lb -= n/m*rb;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            ra -= n/m*la;</div><div class="line">            rb -= n/m*lb;</div><div class="line">        }</div><div class="line">        i = !i;</div><div class="line">        t = n, n = m, m = t%m;</div><div class="line">    }</div><div class="line">    <span class="keyword">if</span>(i)</div><div class="line">        <span class="keyword">return</span> (la%mod+mod)%mod;</div><div class="line">    <span class="keyword">return</span> (ra%mod+mod)%mod;</div><div class="line">}</div><div class="line"><span class="keyword">long</span> <span class="keyword">long</span> getM(<span class="keyword">long</span> <span class="keyword">long</span> n) {</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> l = <span class="number">0</span>, r = <span class="number">3037000499L</span>L/<span class="number">2</span>, m, ret;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> tmp;</div><div class="line">	<span class="keyword">while</span>(l &lt;= r) {</div><div class="line">		m = (l + r) / <span class="number">2</span>;</div><div class="line">		tmp = <span class="number">4</span> * (m) * (m + <span class="number">1</span>);</div><div class="line">		<span class="keyword">if</span>(tmp &lt;= n)</div><div class="line">			l = m + <span class="number">1</span>, ret = m;</div><div class="line">		<span class="keyword">else</span></div><div class="line">			r = m - <span class="number">1</span>;</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> ret;</div><div class="line">}</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line">	<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> n;</div><div class="line">	<span class="keyword">long</span> <span class="keyword">long</span> inv3 = inv(<span class="number">3</span>, MOD);</div><div class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%llu"</span>, &amp;n) == <span class="number">1</span> &amp;&amp; n) {</div><div class="line">		<span class="keyword">long</span> <span class="keyword">long</span> ret = <span class="number">0</span>;<span class="comment">/*</span></div><div class="line">		for(long long i = 1; i &lt;= n; i += 2) {</div><div class="line">			// printf("%d\n", (int)sqrt(i));</div><div class="line">			ret += (long long) sqrt(i);</div><div class="line">			ret %= MOD;</div><div class="line">		}</div><div class="line">		printf("%lld\n", ret);*/</div><div class="line">		<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> m = getM(n);</div><div class="line">		<span class="keyword">long</span> <span class="keyword">long</span> prev = <span class="number">4</span>*(m)*(m + <span class="number">1</span>)%MOD*(<span class="number">2</span>*m + <span class="number">1</span>)%MOD*inv3%MOD - m * (m + <span class="number">1</span>)%MOD;</div><div class="line">		<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> pn = <span class="number">4</span> * (m) * (m + <span class="number">1</span>) - <span class="number">1</span>;</div><div class="line">		prev = (prev%MOD + MOD)%MOD;</div><div class="line">		<span class="comment">//printf("%lld %lld %lld\n", m, prev, pn);</span></div><div class="line">		m++;</div><div class="line">		<span class="keyword">if</span>(pn + m * <span class="number">4</span> &lt; n) {</div><div class="line">			prev += (<span class="number">2</span> * m - <span class="number">1</span>) * <span class="number">2</span> * m%MOD;</div><div class="line">			pn += m * <span class="number">4</span>;</div><div class="line">			<span class="comment">//printf("CROSS1 %llu %llu\n", pn, prev);</span></div><div class="line">			prev += (n - pn)/<span class="number">2</span> * <span class="number">2</span> * m%MOD;</div><div class="line">			<span class="comment">//printf("CROSS2 %llu %llu\n", m * 2, (n - pn) /2);</span></div><div class="line">		} <span class="keyword">else</span> {</div><div class="line">			prev += (n - pn)/<span class="number">2</span> * (<span class="number">2</span> * m - <span class="number">1</span>)%MOD;</div><div class="line">			<span class="comment">//puts("CROSS3");</span></div><div class="line">		}</div><div class="line">		<span class="built_in">printf</span>(<span class="string">"%llu\n"</span>, (prev%MOD + MOD)%MOD);</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="comment">/*</span></div><div class="line">11</div><div class="line">22</div><div class="line">3333</div><div class="line">4444</div><div class="line">555555</div><div class="line">666666</div><div class="line">77777777</div><div class="line">...</div><div class="line">*/</div><div class="line"><span class="comment">/*</span></div><div class="line">10000000001</div><div class="line">*/</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-157" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/29/oj/uva/uva-157/" class="article-date">
  <time datetime="2014-05-29T01:23:04.000Z" itemprop="datePublished">May 29 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/29/oj/uva/uva-157/">UVa 157 - Route Finding</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/29/oj/uva/uva-157/" data-id="sbm9u9d8ceizq4ek" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/29/oj/uva/uva-157/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SPFA/">SPFA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSSP/">SSSP</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p>Many cities provide a comprehensive public transport system, often integrating bus routes, suburban commuter train services and underground railways. Routes on such systems can be categorised according to the stations or stops along them. We conventionally think of them as forming lines (where the vehicle shuttles from one end of the route to the other and returns), loops (where the two ends of the <code>branch</code> are the same and vehicles circle the system in both directions) and connections, where each end of the route connects with another route. Obviously all of these can be thought of as very similar, and can connect with each other at various points along their routes. Note that vehicles can travel in both directions along all routes, and that it is only possible to change between routes at connecting stations.</p>
<p>To simplify matters, each route is given a designation letter from the set <code>A</code> to <code>Z</code>, and each station along a route will be designated by another letter from the set <code>a</code> to <code>z</code>. Connecting stations will have more than one designation. Thus an example could be:</p>
<p><img class="lazy" data-original="/img/157img1.gif" alt=""></p>
<p>A common problem in such systems is finding a route between two stations. Once this has been done we wish to find the <code>best</code> route, where <code>best</code> means <code>shortest time</code>.</p>
<p>Write a program that will read in details of such a system and then will find the fastest routes between given pairs of stations. You can assume that the trip between stations always takes 1 unit of time and that changing between routes at a connecting station takes 3 units of time.</p>
<h2 id="Input">Input</h2>
<p>Input will consist of two parts. The first will consist of a description of a system, the second will consist of pairs of stations. The description will start with a number between 1 and 26 indicating how many routes there are in the system. This will be followed by that many lines, each describing a single route. Each line will start with the route identifier followed by a <code>:</code> followed by the stations along that route, in order. Connections will be indicated by an <code>=</code> sign followed by the complete alternative designation. All connections will be identified at least once, and if there are more than two lines meeting at a connection, some or of all the alternative designations may be identified together. That is, there may be sequences such as <code>...hc=Bg=Cc=Abd...</code>. If the route forms a loop then the last station will be the same as the first. This is the only situation in which station letters will be repeated. The next portion of the input file will consist of a sequence of lines each containing two stations written contiguously. The file will be terminated by a line consisting of a single #.</p>
<h2 id="Output">Output</h2>
<p>Output will consist of a series of lines, one for each pair of stations in the input. Each line will consist of the time for the fastest route joining the two stations, right justified in a field of width 3, followed by a colon and a space and the sequence of stations representing the shortest journey. Follow the example shown below. Note that there will always be only one fastest route for any given pair of stations and that the route must start and finish at the named stations (not at any synonyms thereof), hence the time for the route must include the time for any inter-station transfers.</p>
<p>The example input below refers to the diagram given above.</p>
<h2 id="Sample_input">Sample input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="number">4</span></div><div class="line"><span class="constant">A</span><span class="symbol">:fgmpnxzabjd=Dbf</span></div><div class="line"><span class="constant">D</span><span class="symbol">:b=Adac=Ccf</span></div><div class="line"><span class="constant">B</span><span class="symbol">:acd=Azefg=Cbh</span></div><div class="line"><span class="constant">C</span><span class="symbol">:bac</span></div><div class="line"><span class="constant">AgAa</span></div><div class="line"><span class="constant">AbBh</span></div><div class="line"><span class="constant">BhDf</span></div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure>

<h2 id="Sample_output">Sample output</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"> <span class="attribute">5</span>: <span class="string">Agfdjba</span></div><div class="line"> <span class="attribute">9</span>: <span class="string">Abaz=Bdefgh</span></div><div class="line"><span class="attribute">10</span>: <span class="string">Bhg=Cbac=Dcf</span></div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<p><strong> 題目描述：</strong></p>
<p>這一個交通運輸工具，配置如上圖所述，以大寫字母 (<code>A</code> - <code>Z</code>) 表示哪一種線路，每一條線路上有一些站牌 (<code>a</code> - <code>z</code>)。求某線某站到某線某站的最少花費時間。</p>
<p>然而在同一個線路上，轉換一個站的成本為 <code>1</code>，如果在線路交集站換一條線路走成本為 <code>3</code>。</p>
<p>輸入上比較特別，會用 <code>=</code> 表示交集的站編號，當然有可能會遇到多個線路的站交集在一起。</p>
<p><code>Dhc=Bg=Cc=Abd</code> 則表示 D 線路上的 Dh-Dc-Dd，其中 Dc, Bg, Cc, Ab 共站。</p>
<p>可以當作雙向連通，如果有環，則會頭尾相同，例如 <code>Dhch</code>。</p>
<p><strong> 題目解法：</strong></p>
<p>題目最令人討厭的是，交集站沒有說清楚，也就是說單一線路上的轉運站沒有說清楚，但事實上會被表示在其他線路上，這裡要自己取聯集。</p>
<p>但是做聯集是件挺麻煩的事，因此在求最短路上做點手腳，把狀態表示成 <code>(某線某站, 前一次是否轉運)</code>，這麼做就方便多了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;vector&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;queue&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> trans_node(<span class="keyword">int</span> r, <span class="keyword">int</span> a) {</div><div class="line">	r -= <span class="string">'A'</span>, a -= <span class="string">'a'</span>;</div><div class="line">	<span class="keyword">return</span> r * <span class="number">26</span> + a;</div><div class="line">}</div><div class="line"><span class="keyword">void</span> reverse_node(<span class="keyword">int</span> n, <span class="keyword">int</span> &amp;r, <span class="keyword">int</span> &amp;a) {</div><div class="line">	r = n /<span class="number">26</span> + <span class="string">'A'</span>, a = n %<span class="number">26</span> + <span class="string">'a'</span>;</div><div class="line">}</div><div class="line"><span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;</span> g[<span class="number">1024</span>], g2[<span class="number">1024</span>];</div><div class="line"><span class="keyword">void</span> spfa(<span class="keyword">int</span> st, <span class="keyword">int</span> ed) {</div><div class="line">	<span class="keyword">int</span> used[<span class="number">1024</span>][<span class="number">2</span>] = {}, dist[<span class="number">1024</span>][<span class="number">2</span>] = {}, prex[<span class="number">1024</span>][<span class="number">2</span>][<span class="number">2</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1024</span>; i++)</div><div class="line">		dist[i][<span class="number">0</span>] = dist[i][<span class="number">1</span>] = <span class="number">0x3f3f3f3f</span>;</div><div class="line">	<span class="stl_container"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;</span> Q, S;</div><div class="line">	Q.push(st), S.push(<span class="number">0</span>);</div><div class="line">	dist[st][<span class="number">0</span>] = <span class="number">0</span>, prex[st][<span class="number">0</span>][<span class="number">0</span>] = -<span class="number">1</span>;</div><div class="line">	<span class="keyword">while</span>(!Q.empty()) {</div><div class="line">		<span class="keyword">int</span> u = Q.front(), s = S.front();</div><div class="line">		Q.pop(), S.pop();</div><div class="line">		used[u][s] = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; g[u].size(); i++) {</div><div class="line">			<span class="keyword">int</span> v = g[u][i];</div><div class="line">			<span class="keyword">if</span>(dist[v][<span class="number">0</span>] &gt; dist[u][s] + <span class="number">1</span>) {</div><div class="line">				dist[v][<span class="number">0</span>] = dist[u][s] + <span class="number">1</span>;</div><div class="line">				prex[v][<span class="number">0</span>][<span class="number">0</span>] = u, prex[v][<span class="number">0</span>][<span class="number">1</span>] = s;</div><div class="line">				<span class="keyword">if</span>(!used[v][<span class="number">0</span>]) {</div><div class="line">					used[v][<span class="number">0</span>] = <span class="number">1</span>, Q.push(v), S.push(<span class="number">0</span>);</div><div class="line">				}</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="keyword">int</span> cost = (s == <span class="number">1</span>) ? <span class="number">0</span> : <span class="number">3</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; g2[u].size(); i++) {</div><div class="line">			<span class="keyword">int</span> v = g2[u][i];</div><div class="line">			<span class="keyword">if</span>(dist[v][<span class="number">1</span>] &gt; dist[u][s] + cost) {</div><div class="line">				dist[v][<span class="number">1</span>] = dist[u][s] + cost;</div><div class="line">				</div><div class="line">				<span class="keyword">if</span>(cost == <span class="number">0</span>)</div><div class="line">					prex[v][<span class="number">1</span>][<span class="number">0</span>] = prex[u][s][<span class="number">0</span>], prex[v][<span class="number">1</span>][<span class="number">1</span>] = prex[u][s][<span class="number">1</span>];</div><div class="line">				<span class="keyword">else</span></div><div class="line">					prex[v][<span class="number">1</span>][<span class="number">0</span>] = u, prex[v][<span class="number">1</span>][<span class="number">1</span>] = s;</div><div class="line"></div><div class="line">				<span class="keyword">if</span>(!used[v][<span class="number">1</span>]) {</div><div class="line">					used[v][<span class="number">1</span>] = <span class="number">1</span>, Q.push(v), S.push(<span class="number">1</span>);</div><div class="line">				}</div><div class="line">			}</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="built_in">printf</span>(<span class="string">"%3d: "</span>, min(dist[ed][<span class="number">0</span>], dist[ed][<span class="number">1</span>]));</div><div class="line">	</div><div class="line">	<span class="keyword">int</span> r = -<span class="number">1</span>, a = -<span class="number">1</span>, s, mm = ed;</div><div class="line">	<span class="keyword">if</span>(dist[ed][<span class="number">0</span>] &lt;= dist[ed][<span class="number">1</span>])</div><div class="line">		s = <span class="number">0</span>;</div><div class="line">	<span class="keyword">else</span></div><div class="line">		s = <span class="number">1</span>;</div><div class="line">	<span class="keyword">do</span> {</div><div class="line">		<span class="keyword">int</span> nr, na;</div><div class="line">		reverse_node(mm, nr, na);</div><div class="line">		<span class="keyword">if</span>(nr != r) {</div><div class="line">			<span class="keyword">if</span>(mm != ed)	<span class="built_in">printf</span>(<span class="string">"="</span>);</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%c%c"</span>, nr, na);</div><div class="line">		} <span class="keyword">else</span> {</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%c"</span>, na);</div><div class="line">		}</div><div class="line">		<span class="keyword">int</span> om = mm;</div><div class="line">		mm = prex[om][s][<span class="number">0</span>], s = prex[om][s][<span class="number">1</span>];</div><div class="line">		r = nr, a = na;</div><div class="line">	} <span class="keyword">while</span>(mm != -<span class="number">1</span>);</div><div class="line">	<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">}</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line">	<span class="keyword">char</span> line[<span class="number">1024</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> n; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span>;) {</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1024</span>; i++)</div><div class="line">			g[i].clear(), g2[i].clear();</div><div class="line">		<span class="keyword">while</span>(n--) {</div><div class="line">			<span class="built_in">scanf</span>(<span class="string">"%s"</span>, &amp;line);</div><div class="line">			<span class="keyword">int</span> r = line[<span class="number">0</span>], preX;</div><div class="line">			preX = trans_node(r, line[<span class="number">2</span>]);</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">3</span>; line[i]; i++) {</div><div class="line">				<span class="keyword">if</span>(line[i] != <span class="string">'='</span>) {</div><div class="line">					<span class="keyword">int</span> x = trans_node(r, line[i]);</div><div class="line">					<span class="keyword">int</span> y = preX;</div><div class="line">					g[x].push_back(y);</div><div class="line">					g[y].push_back(x);</div><div class="line">					preX = x;</div><div class="line">				} <span class="keyword">else</span> {</div><div class="line">					<span class="keyword">int</span> x = trans_node(line[i+<span class="number">1</span>], line[i+<span class="number">2</span>]);</div><div class="line">					<span class="keyword">int</span> y = preX;</div><div class="line">					g2[x].push_back(y);</div><div class="line">					g2[y].push_back(x);</div><div class="line">					i += <span class="number">2</span>;</div><div class="line">				}</div><div class="line">			}</div><div class="line">		}</div><div class="line">		<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%s"</span>, line) == <span class="number">1</span> &amp;&amp; line[<span class="number">0</span>] != <span class="string">'#'</span>) {</div><div class="line">			<span class="keyword">int</span> x = trans_node(line[<span class="number">0</span>], line[<span class="number">1</span>]);</div><div class="line">			<span class="keyword">int</span> y = trans_node(line[<span class="number">2</span>], line[<span class="number">3</span>]);</div><div class="line">			spfa(y, x);</div><div class="line">		}</div><div class="line">	}</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div><div class="line"><span class="comment">/*</span></div><div class="line">4</div><div class="line">A:fgmpnxzabjd=Dbf</div><div class="line">D:b=Adac=Ccf</div><div class="line">B:acd=Azefg=Cbh</div><div class="line">C:bac</div><div class="line">AgAa</div><div class="line">AbBh</div><div class="line">BhDf</div><div class="line">#</div><div class="line"></div><div class="line">5 </div><div class="line">A:ab=Bbcdefghijk </div><div class="line">B:abc=Ajdef=Cb </div><div class="line">C:ab </div><div class="line">D:cd=Eg </div><div class="line">E:fg=Bf </div><div class="line">AaAk </div><div class="line">AcAk </div><div class="line">AbBb </div><div class="line">BaDd </div><div class="line"># </div><div class="line">*/</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
    <article id="post-oj/uva/uva-172" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/05/28/oj/uva/uva-172/" class="article-date">
  <time datetime="2014-05-27T23:33:52.000Z" itemprop="datePublished">May 28 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/解題區/">解題區</a>►<a class="article-category-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a>
  </div>

  </div>
  <div class="article-inner ">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/28/oj/uva/uva-172/">UVa 172 - Calculator Language</a>
    </h1>
  

      </header>
        
    <footer class="article-footer">
      <a data-url="http://morris821028.github.io/2014/05/28/oj/uva/uva-172/" data-id="t5p5q4orhhf2u2dr" class="article-share-link">Share</a>
      
        <a href="http://morris821028.github.io/2014/05/28/oj/uva/uva-172/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/parsing-tree/">parsing tree</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stack/">stack</a></li></ul>

    </footer>
    <div class="article-entry article-index" itemprop="articleBody">
      
          
        
          <div class="toggle-content">
            <h2 id="Problem">Problem</h2>
<p> Calculator Language (CL) supports assignment, positive and negative integers and simple arithmetic. The allowable characters in a CL statement are thus:</p>
<p><img class="lazy" data-original="/img/172img1.gif" alt=""></p>
<p>All operators have the same precedence and are right associative, thus 15 - 8 - 3 = 15 - (8 - 3) = 10. As one would expect, brackets will force the expression within them to be evaluated first. Brackets may be nested arbitrarily deeply. An expression never has two operators next to each other (even if separated by a bracket), an assignment operator is always immediately preceded by a variable and the leftmost operator on a line is always an assignment. For readability, spaces may be freely inserted into an expression, except between a negative sign and a number. A negative sign will not appear before a variable. All variables are initialised to zero (0) and retain their values until changed explicitly.</p>
<p>Write a program that will accept and evaluate expressions written in this language. Each expression occupies one line and contains at least one assignment operator, and maybe more.</p>
<h2 id="Input">Input</h2>
<p>Input will consist of a series of lines, each line containing a correct CL expression. No line will be longer than 100 characters. The file will be terminated by a line consisting of a single #.</p>
<h2 id="Output">Output</h2>
<p>Output will consist of a series of lines, one for each line of the input. Each line will consist of a list of the final values of all variables whose value changes as a result of the evaluation of that expression. If more than one variable changes value, they should be listed in alphabetical order, separated by commas. If a variable changes value more than once in an expression, only the final value is output. A variable is said to change value if its value after the expression has been evaluated is different from its value before the expression was evaluated. If no variables change value, then print the message `No Change’. Follow the format shown below exactly.</p>
<h2 id="Sample_input">Sample input</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="variable">A =</span> <span class="variable">B =</span> <span class="number">4</span></div><div class="line"><span class="variable">C =</span> (<span class="variable">D =</span> <span class="number">2</span>)*_2</div><div class="line"><span class="variable">C =</span> <span class="variable">D =</span> <span class="number">2</span> * _2</div><div class="line"><span class="variable">F =</span> C - D</div><div class="line"><span class="variable">E =</span> D * _10</div><div class="line"><span class="variable">Z =</span> <span class="number">10</span> / <span class="number">3</span></div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure>

<h2 id="Sample_output">Sample output</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="variable">A =</span> <span class="number">4</span>, <span class="variable">B =</span> <span class="number">4</span></div><div class="line"><span class="variable">C =</span> -<span class="number">4</span>, <span class="variable">D =</span> <span class="number">2</span></div><div class="line"><span class="variable">D =</span> -<span class="number">4</span></div><div class="line">No Change</div><div class="line"><span class="variable">E =</span> <span class="number">40</span></div><div class="line"><span class="variable">Z =</span> <span class="number">3</span></div></pre></td></tr></table></figure>

<h2 id="Solution">Solution</h2>
<p><strong> 題目描述：</strong></p>
<p>給一個六則運算，並且所有運算由右往左，也就是題目提及的 <code>right associative</code>，並且在每一個運算式之後輸出有改變值的變數結果。</p>
<p><strong> 題目解法：</strong></p>
<p>要處理的問題相當多，按照一般的思路要做出 <code>right associative</code> 還不打緊，就像冪次的定義一樣，也就是把 stack 的嚴格遞增改成非嚴格遞增。</p>
<p>但是查閱討論區給定的數據後，如下所示</p>
<p>範例輸入</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">B=</span>(<span class="variable">A=</span><span class="number">1</span>)+(<span class="variable">A=</span><span class="number">2</span>)</div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure>

<p>範例輸出</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">A =</span> <span class="number">1</span>, <span class="variable">B =</span> <span class="number">3</span></div></pre></td></tr></table></figure>

<p>這表示著連括弧運算順序都是 <code>right associative</code>，這一點相當苦惱，於是最後建造 tree，然後先拜訪右子樹、再拜訪左子樹來解決這些問題。</p>
<p>中間誤把 <code>No Change</code> 寫成 <code>No change</code>，因此卡了不少 <code>Wrong Answer</code>。</p>
<p>Sample Input:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="variable">A =</span> <span class="variable">B =</span> <span class="number">4</span></div><div class="line"><span class="variable">B=</span>B-<span class="number">6</span>+<span class="variable">B=</span><span class="number">100</span></div><div class="line"><span class="variable">C =</span> (<span class="variable">D =</span> <span class="number">2</span>) * _2</div><div class="line"><span class="variable">C =</span> <span class="variable">D =</span> <span class="number">2</span> * _2</div><div class="line"><span class="variable">E =</span> D * _10</div><div class="line"><span class="variable">F =</span> <span class="number">15</span> - <span class="number">8</span> - <span class="number">3</span></div><div class="line"><span class="variable">F =</span> <span class="number">15</span> - <span class="number">8</span> + _3</div><div class="line"><span class="variable">F=</span><span class="number">1</span>+<span class="variable">F=</span>F-<span class="number">1</span></div><div class="line"><span class="variable">A=</span>((<span class="number">3</span>))</div><div class="line"><span class="variable">Z=</span><span class="variable">Y=</span><span class="variable">X=</span><span class="variable">A=</span><span class="variable">B=</span><span class="variable">C=</span><span class="number">1</span>+<span class="variable">D=</span><span class="variable">E=</span><span class="variable">F=</span><span class="variable">G=</span><span class="number">2</span><span class="variable">-H=</span><span class="variable">K=</span><span class="variable">J=</span><span class="variable">I=</span><span class="variable">L=</span><span class="variable">M=</span><span class="variable">O=</span><span class="variable">N=</span><span class="variable">P=</span><span class="variable">Q=</span><span class="variable">R=</span><span class="variable">S=</span><span class="variable">T=</span><span class="variable">V=</span><span class="variable">U=</span><span class="variable">W=</span><span class="number">3</span></div><div class="line"><span class="variable">A=</span><span class="number">100</span>/<span class="number">2</span></div><div class="line"><span class="variable">A=</span><span class="number">100</span>/_2</div><div class="line"><span class="variable">B=</span>(_1+A*<span class="number">2</span>)/<span class="number">2</span></div><div class="line"><span class="variable">B=</span>(<span class="number">1</span>+A*_2)/<span class="number">2</span></div><div class="line"><span class="variable">A=</span>(((<span class="number">1</span>-<span class="number">2</span>)*<span class="number">3</span>)+<span class="number">4</span>)</div><div class="line"><span class="variable">A=</span>((<span class="number">1</span>-(<span class="number">2</span>*<span class="number">3</span>))+<span class="number">4</span>)</div><div class="line"><span class="variable">A=</span>((<span class="number">1</span>-<span class="number">2</span>)*(<span class="number">3</span>+<span class="number">4</span>))</div><div class="line"><span class="variable">A=</span>(<span class="number">1</span>-(<span class="number">2</span>*(<span class="number">3</span>+<span class="number">4</span>)))</div><div class="line"><span class="variable">A=</span><span class="number">1</span>+<span class="number">2</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">11</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">1</span>+<span class="number">3</span></div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure>

<p>AC Sample Output:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="variable">A =</span> <span class="number">4</span>, <span class="variable">B =</span> <span class="number">4</span></div><div class="line"><span class="variable">B =</span> -<span class="number">6</span></div><div class="line"><span class="variable">C =</span> -<span class="number">4</span>, <span class="variable">D =</span> <span class="number">2</span></div><div class="line"><span class="variable">D =</span> -<span class="number">4</span></div><div class="line"><span class="variable">E =</span> <span class="number">40</span></div><div class="line"><span class="variable">F =</span> <span class="number">10</span></div><div class="line">No Change</div><div class="line">No Change</div><div class="line"><span class="variable">A =</span> <span class="number">3</span></div><div class="line"><span class="variable">A =</span> <span class="number">0</span>, <span class="variable">B =</span> <span class="number">0</span>, <span class="variable">C =</span> <span class="number">0</span>, <span class="variable">D =</span> -<span class="number">1</span>, <span class="variable">E =</span> -<span class="number">1</span>, <span class="variable">F =</span> -<span class="number">1</span>, <span class="variable">G =</span> -<span class="number">1</span>, <span class="variable">H =</span> <span class="number">3</span>, <span class="variable">I =</span> <span class="number">3</span>, <span class="variable">J =</span> <span class="number">3</span>, <span class="variable">K =</span> <span class="number">3</span>, <span class="variable">L =</span> <span class="number">3</span>, <span class="variable">M =</span> <span class="number">3</span>, <span class="variable">N =</span> <span class="number">3</span>, <span class="variable">O =</span> <span class="number">3</span>, <span class="variable">P =</span> <span class="number">3</span>, <span class="variable">Q =</span> <span class="number">3</span>, <span class="variable">R =</span> <span class="number">3</span>, <span class="variable">S =</span> <span class="number">3</span>, <span class="variable">T =</span> <span class="number">3</span>, <span class="variable">U =</span> <span class="number">3</span>, <span class="variable">V =</span> <span class="number">3</span>, <span class="variable">W =</span> <span class="number">3</span></div><div class="line"><span class="variable">A =</span> <span class="number">50</span></div><div class="line"><span class="variable">A =</span> -<span class="number">50</span></div><div class="line"><span class="variable">B =</span> -<span class="number">50</span></div><div class="line"><span class="variable">B =</span> <span class="number">50</span></div><div class="line"><span class="variable">A =</span> <span class="number">1</span></div><div class="line"><span class="variable">A =</span> -<span class="number">1</span></div><div class="line"><span class="variable">A =</span> -<span class="number">7</span></div><div class="line"><span class="variable">A =</span> -<span class="number">13</span></div><div class="line"><span class="variable">A =</span> <span class="number">62</span></div></pre></td></tr></table></figure>

<p>一開始還在想為什麼當 <code>B = 4</code> 時，<code>B=B-6+B=100</code> 會產出 <code>B = -6</code>，由右往左運算。</p>
<ul>
<li>B = 100</li>
<li>6 + B = 106</li>
<li>B - (6 + B) = 100 - 106 = -6</li>
<li>B assign(=) -6</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Accepted</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stack&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;algorithm&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;ctype.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;sstream&gt;</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> priority_op(<span class="keyword">char</span> c) {</div><div class="line">    <span class="keyword">switch</span>(c) {</div><div class="line">        <span class="keyword">case</span> <span class="string">'('</span>:<span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">'='</span>:<span class="keyword">return</span> <span class="number">3</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">'+'</span>: <span class="keyword">case</span> <span class="string">'-'</span>:<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">'*'</span>: <span class="keyword">case</span> <span class="string">'/'</span>:<span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">    }</div><div class="line">    <span class="built_in">puts</span>(<span class="string">"ERROR"</span>);</div><div class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">}</div><div class="line"><span class="keyword">void</span> trans(<span class="keyword">char</span> infix[], <span class="keyword">char</span> buffer[]) {</div><div class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(infix);</div><div class="line">    <span class="keyword">char</span> *ptr = buffer;</div><div class="line">    <span class="stl_container"><span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt;</span> op;</div><div class="line">    *ptr = <span class="string">'\0'</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) {</div><div class="line">        <span class="keyword">if</span>(infix[i] == <span class="string">'_'</span> || <span class="built_in">isdigit</span>(infix[i]) || <span class="built_in">isalpha</span>(infix[i])) {</div><div class="line">        	<span class="keyword">while</span>(infix[i] == <span class="string">'_'</span> || <span class="built_in">isdigit</span>(infix[i]) || <span class="built_in">isalpha</span>(infix[i])) {</div><div class="line">        		<span class="keyword">if</span>(infix[i] == <span class="string">'_'</span>)</div><div class="line">        			<span class="built_in">sprintf</span>(ptr, <span class="string">"-"</span>);</div><div class="line">        		<span class="keyword">else</span></div><div class="line">            		<span class="built_in">sprintf</span>(ptr, <span class="string">"%c"</span>, infix[i]);	</div><div class="line">            	<span class="keyword">while</span>(*ptr)    ptr++;</div><div class="line">            	i++;</div><div class="line">        	}</div><div class="line">            <span class="built_in">sprintf</span>(ptr, <span class="string">" "</span>);	</div><div class="line">            <span class="keyword">while</span>(*ptr)    ptr++;</div><div class="line">        	i--;</div><div class="line">        }<span class="keyword">else</span> {</div><div class="line">        	<span class="keyword">if</span>(infix[i] == <span class="string">' '</span>)	<span class="keyword">continue</span>;</div><div class="line">            <span class="keyword">if</span>(infix[i] == <span class="string">')'</span>) {</div><div class="line">                <span class="keyword">while</span>(!op.empty() &amp;&amp; op.top() != <span class="string">'('</span>) {</div><div class="line">                    <span class="built_in">sprintf</span>(ptr, <span class="string">"%c "</span>, op.top()), op.pop();</div><div class="line">                    <span class="keyword">while</span>(*ptr) ptr++;</div><div class="line">                }</div><div class="line">                op.pop();</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                <span class="keyword">if</span>(infix[i] != <span class="string">'('</span>) {</div><div class="line">                	<span class="keyword">if</span>(infix[i] == <span class="string">'='</span>) {</div><div class="line">                		<span class="keyword">while</span>(!op.empty() &amp;&amp; priority_op(op.top()) &gt; priority_op(infix[i])) {</div><div class="line">                    		<span class="built_in">sprintf</span>(ptr, <span class="string">"%c "</span>, op.top()), op.pop();</div><div class="line">                    		<span class="keyword">while</span>(*ptr) ptr++;</div><div class="line">                		}</div><div class="line">                	} <span class="keyword">else</span> {</div><div class="line">                		<span class="keyword">while</span>(!op.empty() &amp;&amp; priority_op(op.top()) &gt; priority_op(infix[i]) &amp;&amp; op.top() != <span class="string">'='</span>) {</div><div class="line">                    		<span class="built_in">sprintf</span>(ptr, <span class="string">"%c "</span>, op.top()), op.pop();</div><div class="line">                    		<span class="keyword">while</span>(*ptr) ptr++;</div><div class="line">                		}</div><div class="line">                	}</div><div class="line">                }</div><div class="line">                op.push(infix[i]);</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">while</span>(!op.empty()) {</div><div class="line">        <span class="built_in">sprintf</span>(ptr, <span class="string">"%c "</span>, op.top()), op.pop();</div><div class="line">        <span class="keyword">while</span>(*ptr) ptr++;</div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="keyword">int</span> Variable[<span class="number">26</span>] = {}, oldVal[<span class="number">26</span>] = {};</div><div class="line"><span class="built_in">string</span> to_string(<span class="keyword">int</span> number) {</div><div class="line">   <span class="built_in">stringstream</span> ss;<span class="comment">//create a stringstream</span></div><div class="line">   ss &lt;&lt; number;<span class="comment">//add number to the stream</span></div><div class="line">   <span class="keyword">return</span> ss.str();<span class="comment">//return a string with the contents of the stream</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">struct</span> TreeNode {</div><div class="line">	<span class="built_in">string</span> 	A, B, OP;</div><div class="line">	<span class="keyword">int</span> 	l, r;</div><div class="line">	TreeNode(<span class="built_in">string</span> a=<span class="string">""</span>, <span class="built_in">string</span> b=<span class="string">""</span>, <span class="built_in">string</span> op=<span class="string">""</span>):</div><div class="line">		A(a), B(b), OP(op) {}</div><div class="line">};</div><div class="line">TreeNode node[<span class="number">1024</span>];</div><div class="line"><span class="keyword">int</span> runTree(<span class="keyword">int</span> label) {</div><div class="line">	<span class="built_in">string</span> 	A = node[label].A;</div><div class="line">	<span class="built_in">string</span>	B = node[label].B;</div><div class="line">	<span class="keyword">int</span> 	a, b;</div><div class="line">	<span class="keyword">if</span>(node[label].OP == <span class="string">"LEAF"</span>) {</div><div class="line">		<span class="keyword">if</span>(<span class="built_in">isalpha</span>(A[<span class="number">0</span>]))</div><div class="line">           	a = Variable[A[<span class="number">0</span>] - <span class="string">'A'</span>];</div><div class="line">        <span class="keyword">else</span></div><div class="line">           	a = atoi(A.c_str());</div><div class="line">		<span class="keyword">return</span> a;	</div><div class="line">	}</div><div class="line">	b = runTree(node[label].r);</div><div class="line">	a = runTree(node[label].l);</div><div class="line"><span class="comment">//	printf("%d %d\n", a, b);</span></div><div class="line">	<span class="comment">//cout &lt;&lt; A &lt;&lt; ", " &lt;&lt; B &lt;&lt; ", " &lt;&lt; node[label].OP &lt;&lt; endl;</span></div><div class="line">	<span class="keyword">switch</span>(node[label].OP[<span class="number">0</span>]) {</div><div class="line">    	<span class="keyword">case</span> <span class="string">'+'</span>: a = a + b; <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">'-'</span>: a = a - b; <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">'*'</span>: a = a * b; <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">'/'</span>: a = a / b; <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">'='</span>: </div><div class="line">        	a = b;</div><div class="line">        	<span class="keyword">if</span>(<span class="built_in">isalpha</span>(A[<span class="number">0</span>])) {</div><div class="line">        		Variable[A[<span class="number">0</span>] - <span class="string">'A'</span>] = a;</div><div class="line">        		<span class="comment">//cout &lt;&lt; A &lt;&lt; " -- " &lt;&lt; a &lt;&lt; endl;</span></div><div class="line">        	}</div><div class="line">        	<span class="keyword">break</span>;</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> a;</div><div class="line">}</div><div class="line"><span class="keyword">void</span> buildTree(<span class="keyword">char</span> postfix[]) {</div><div class="line">	</div><div class="line">	<span class="built_in">stringstream</span>	<span class="built_in">sin</span>(postfix);</div><div class="line">	<span class="built_in">string</span> 			token, A, B;</div><div class="line">    <span class="stl_container"><span class="built_in">stack</span>&lt;<span class="built_in">string</span>&gt;</span>	stk;</div><div class="line">    <span class="stl_container"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt;</span>		nodeLabel;</div><div class="line">    <span class="keyword">int</span> 			treeSize = <span class="number">0</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">while</span>(<span class="built_in">sin</span> &gt;&gt; token) {</div><div class="line">    	<span class="keyword">if</span>(<span class="built_in">isalpha</span>(token[<span class="number">0</span>])) {</div><div class="line">    		stk.push(token);</div><div class="line">    		nodeLabel.push(treeSize);</div><div class="line">    		node[treeSize++] = TreeNode(token, <span class="string">""</span>, <span class="string">"LEAF"</span>);</div><div class="line">    		</div><div class="line">    	} <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isdigit</span>(token[token.length() - <span class="number">1</span>])) {</div><div class="line">    		stk.push(token);</div><div class="line">    		nodeLabel.push(treeSize);</div><div class="line">    		node[treeSize++] = TreeNode(token, <span class="string">""</span>, <span class="string">"LEAF"</span>);</div><div class="line">    	} <span class="keyword">else</span> {</div><div class="line">			B = stk.top(), stk.pop();</div><div class="line">            A = stk.top(), stk.pop();</div><div class="line">            <span class="keyword">int</span> a, b;</div><div class="line">            b = nodeLabel.top(), nodeLabel.pop();</div><div class="line">            a = nodeLabel.top(), nodeLabel.pop();</div><div class="line">            nodeLabel.push(treeSize);</div><div class="line">            node[treeSize] = TreeNode(A, B, token);</div><div class="line">            node[treeSize].l = a, node[treeSize].r = b;</div><div class="line">            treeSize++;</div><div class="line">            stk.push(<span class="string">"INNER"</span>);</div><div class="line">    	}</div><div class="line">    }</div><div class="line">    runTree(nodeLabel.top());</div><div class="line">}</div><div class="line"><span class="keyword">char</span> infix[<span class="number">262144</span>], postfix[<span class="number">262144</span>];</div><div class="line"><span class="keyword">int</span> main() {</div><div class="line">    <span class="keyword">while</span>(gets(infix) &amp;&amp; infix[<span class="number">0</span>] != <span class="string">'#'</span>) {</div><div class="line">        trans(infix, postfix);</div><div class="line">        </div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++)</div><div class="line">        	oldVal[i] = Variable[i];</div><div class="line">        	</div><div class="line">        buildTree(postfix);</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> f = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++) {</div><div class="line">        	<span class="keyword">if</span>(oldVal[i] != Variable[i]) {</div><div class="line">        		<span class="keyword">if</span>(f)	<span class="built_in">printf</span>(<span class="string">", "</span>);</div><div class="line">        		f = <span class="number">1</span>;</div><div class="line">        		<span class="built_in">printf</span>(<span class="string">"%c = %d"</span>, i + <span class="string">'A'</span>, Variable[i]);</div><div class="line">        	}</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span>(f == <span class="number">0</span>)</div><div class="line">        	<span class="built_in">puts</span>(<span class="string">"No Change"</span>);</div><div class="line">        <span class="keyword">else</span></div><div class="line">        	<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">        <span class="comment">//printf("%s\n", postfix);</span></div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">}</div></pre></td></tr></table></figure>
          </div>
          <div class="toggle-input article-more-link"><a>Read More +</a></div>
        
      
    </div>

  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/categories/解題區/page/51/">&laquo; Prev</a><a class="page-number" href="/categories/解題區/">1</a><span class="space">&hellip;</span><a class="page-number" href="/categories/解題區/page/50/">50</a><a class="page-number" href="/categories/解題區/page/51/">51</a><span class="page-number current">52</span><a class="page-number" href="/categories/解題區/page/53/">53</a><a class="page-number" href="/categories/解題區/page/54/">54</a><span class="space">&hellip;</span><a class="page-number" href="/categories/解題區/page/56/">56</a><a class="extend next" rel="next" href="/categories/解題區/page/53/">Next &raquo;</a>
    </nav>
  
</section>
          
            <aside id="sidebar">
  <div id="ukagaka_panel"></div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/">學校課程</a><span class="category-list-count">63</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/介面設計/">介面設計</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/作業系統/">作業系統</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/大學專題/">大學專題</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/巨量資料/">巨量資料</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/敏捷方法/">敏捷方法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/編譯器/">編譯器</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/自然語言/">自然語言</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/虛擬實境/">虛擬實境</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算型智慧/">計算型智慧</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/計算幾何/">計算幾何</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資料庫系統/">資料庫系統</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/資訊安全/">資訊安全</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/學校課程/通識課程/">通識課程</a><span class="category-list-count">14</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/手札日記/">手札日記</a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/">網頁設計</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/About-This-Blog/">About This Blog</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/HTML5/">HTML5</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/JQuery/">JQuery</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/網頁設計/NodeJs/">NodeJs</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/">解題區</a><span class="category-list-count">552</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/Latex/">Latex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/出題解題/">出題解題</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-POJ/">解題區 - POJ</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-UVa/">解題區 - UVa</a><span class="category-list-count">453</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-Zerojudge/">解題區 - Zerojudge</a><span class="category-list-count">50</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-其他題目/">解題區 - 其他題目</a><span class="category-list-count">28</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/解題區/解題區-未解題目/">解題區 - 未解題目</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/雜言筆記/">雜言筆記</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a class="text" href="/2015/07/15/zj-b446/">
              
                <i class="icon-file-o"></i> 
              
            b446. 搜索美學 史蒂芙的煩惱</a>
          </li>
        
          <li>
            <a class="text" href="/2015/07/15/zj-b443/">
              
                <i class="icon-file-o"></i> 
              
            b443. 我愛 Fibonacci</a>
          </li>
        
          <li>
            <a class="text" href="/2015/07/13/zj-b444/">
              
                <i class="icon-file-o"></i> 
              
            b444. 期望試驗 快速冪次</a>
          </li>
        
          <li>
            <a class="text" href="/2015/07/12/diary-20150712/">
              
                <i class="icon-file-o"></i> 
              
            在醒不來的夢中探索</a>
          </li>
        
          <li>
            <a class="text" href="/2015/07/12/zj-b440/">
              
                <i class="icon-file-o"></i> 
              
            b440. 互質對</a>
          </li>
        
          <li>
            <a class="text" href="/2015/07/12/zj-b441/">
              
                <i class="icon-file-o"></i> 
              
            b441. 延展尺寸</a>
          </li>
        
          <li>
            <a class="text" href="/2015/07/12/zj-b438/">
              
                <i class="icon-file-o"></i> 
              
            b438. 裁剪尺寸</a>
          </li>
        
          <li>
            <a class="text" href="/2015/07/11/zj-b442/">
              
                <i class="icon-file-o"></i> 
              
            b442. 快取實驗 矩陣乘法</a>
          </li>
        
          <li>
            <a class="text" href="/2015/07/11/zj-b439/">
              
                <i class="icon-file-o"></i> 
              
            b439. 快取置換機制</a>
          </li>
        
          <li>
            <a class="text" href="/2015/07/11/zj-b435/">
              
                <i class="icon-file-o"></i> 
              
            b435. 尋找原根</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">Links</h3>
    <div class="widget">   
      	<ul>
	      <li><a href="http://mypaper.pchome.com.tw/zerojudge" target="_blank" title="Old Blog"><i class="icon-star"></i> Morris' Blog (pchome)</a></li>
	      <li><a href="http://flere114.blogspot.tw/" target="_blank" title="蘿莉勿觸"><i class="icon-googles"></i> flere's Blog</a></li>
	      <li><a href="http://dreamoon4.blogspot.tw/" target="_blank" title="夢月"><i class="icon-googles"></i> dreamoon's Blog</a></li>
	      <li><a href="http://m80126colin.github.io" target="_blank" title="許胖們"><i class="icon-github-alt"></i> m80126colin's Blog</a></li>
	      <li><a href="http://sd12582000.blogspot.tw/" target="_blank" title="妮可妮可"><i class="icon-github-alt"></i> Nico's Blog</a></li>
	      <li><a href="http://kuoe0.logdown.com/" target="_blank" title="郭至軒大神"><i class="icon-github-alt"></i> KuoE0's Dots</a></li>
	      <li><a href="http://tyan.io/" title=""><i class="icon-github-alt"></i> Tyan Blog</a></li>
    	</ul>
    </div>
</div>

  
    
<script src="/js/jquery-ui.js"></script>
<script src="/js/ukagaka/jquery.morris.ukagaka.resource.js"></script>
<script src="/js/ukagaka/typed.js"></script>
<script type="text/javascript">
  $('#ukagaka_panel').ukagaka();
</script>
  
</aside>
          
        
      </div>
      <footer id="footer">
  
  <div class="outer">    
    <div class="social-group">
      
      <a href="https://github.com/morris821028" target="_blank" title="github"><i class="icon-github"></i></a>
      
      
      <a href="https://plus.google.com/u/0/108158678174364359204" target="_blank" title="Google+"><i class="icon-google-plus-sign"></i></a>
      
      
      <a href="https://www.facebook.com/Morris1028" target="_blank" title="facebook"><i class="icon-facebook-sign"></i></a>
      
      
      <a href="http://uhunt.felix-halim.net/id/46705" target="_blank" title="uhunt" ><span class="icon-uhunt">UVa<span></a>
      
    </div>
    <div id="footer-info" class="inner">
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/morris821028/hexo-theme-landscape" target="_blank" title="landscape">landscape</a> &copy; 2015 Shiang-Yun Yang 
    </div>  

  </div>
</footer>


    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link"><i class=icon-home ></i>&nbsp&nbspHome</a>
  
    <a href="/about" class="mobile-nav-link"><i class=icon-user ></i>&nbsp&nbspAbout</a>
  
    <a href="/archives" class="mobile-nav-link"><i class=icon-archive ></i>&nbsp&nbspArchives</a>
  
    <a href="/tags" class="mobile-nav-link"><i class=icon-tags ></i>&nbsp&nbspTags</a>
  
    <a href="/picture" class="mobile-nav-link"><i class=icon-camera ></i>&nbsp&nbspPictures</a>
  
    <a href="/works" class="mobile-nav-link"><i class=icon-trophy ></i>&nbsp&nbspWorks</a>
  
</nav>
    
<script>
  var disqus_shortname = 'morris1028';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/jquery.lazyload.js" type="text/javascript"></script>

<script src="/js/jquery.als-1.6.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>